webpackJsonp([9],{"+BTi":function(t,e){},"/I4U":function(t,e){},"/bpg":function(t,e){},"0N9N":function(t,e){},"1c4S":function(t,e){},"2rGO":function(t,e){},"5u3S":function(t,e){},"758U":function(t,e){},"7NY6":function(t,e){},"8z31":function(t,e){},"991W":function(t,e){},DSCY:function(t,e){},Dte2:function(t,e){},"EK+F":function(t,e){},GXEp:function(t,e){},I4nB:function(t,e){},IJ3g:function(t,e){},IxJZ:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("/I4U"),n("+BTi");var s=n("yg6k"),a=n.n(s),r=(n("2rGO"),n("nu7/")),i=n.n(r),o=(n("cDSy"),n("e0Bm")),u=n.n(o),c=(n("d7TW"),n("ajQY")),l=n.n(c),d=(n("8z31"),n("SXzR")),h=n.n(d),p=(n("I4nB"),n("STLj")),f=n.n(p),m=(n("/bpg"),n("ACGT")),b=n.n(m),v=(n("bwiK"),n("SExR")),y=n.n(v),_=(n("Dte2"),n("q4le")),g=n.n(_),k=(n("isE6"),n("LR6y")),S=n.n(k),C=(n("DSCY"),n("LaeV")),x=n.n(C),w=(n("IxJZ"),n("NoPp")),j=n.n(w),D=(n("X+ky"),n("HJMx")),L=n.n(D),F=(n("Yq4J"),n("qubY")),O=n.n(F),T=(n("Q6SQ"),n("LQMI")),V=n.n(T),q=(n("jZDA"),n("91Nw")),E=n.n(q),P=(n("GXEp"),n("mtrD")),z=n.n(P),A=n("7+uW"),M=n("Xxa5"),W=n.n(M),B=n("mvHQ"),N=n.n(B),U=n("exGp"),$=n.n(U),R=n("mw3O"),H=n.n(R),I=n("mtWM"),K=n.n(I),Y={hosts:{api:"http://182.61.43.233:3000",api_huobi:"https://api.huobi.br.com",huobi_ws:"182.61.43.233:3000"},isMobile:!!/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent),isDev:!1,prices:{btc:6500,etch:200}};window.appConfig=Y;var J,X,G=Y,Q=K.a.create({baseURL:G.hosts.api,timeout:3e4,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){return"application/x-www-form-urlencoded"===e["Content-Type"]&&"[object Object]"===Object.prototype.toString(t)?H.a.stringify(t):t}]}),Z=(J=$()(W.a.mark(function t(e,n){var s;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q.post(e,n);case 3:if(200!==(s=t.sent).status||"ok"!==s.data.status){t.next=6;break}return t.abrupt("return",s.data);case 6:throw{tip:"error",response:s,data:{},url:e};case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}},t,this,[[0,10]])})),function(t,e){return J.apply(this,arguments)}),tt=(X=$()(W.a.mark(function t(e,n){var s;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q.get(e);case 3:if(200!==(s=t.sent).status||"ok"!==s.data.status){t.next=6;break}return t.abrupt("return",s.data);case 6:throw{tip:"error",response:s,data:s.data||{},url:e};case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}},t,this,[[0,10]])})),function(t,e){return X.apply(this,arguments)});function et(t,e,n){var s=G.hosts.api+"/api/huobi/v1/get_kline?"+H.a.stringify({symbol:t,period:e,size:n});return tt(s)}var nt=function(){var t=$()(W.a.mark(function t(){var e;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=G.hosts.api_huobi+"/v1/common/symbols",void 0===localStorage.symbols){t.next=3;break}return t.abrupt("return",JSON.parse(localStorage.symbols));case 3:return t.abrupt("return",tt(e).then(function(t){return localStorage.symbols=N()(t.data),t.data}));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();!function(){var t=$()(W.a.mark(function t(e,n){var s,a,r;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt();case 2:return s=t.sent,a=0,r=0,s.some(function(t){return t["base-currency"]===e&&t["quote-currency"]===n&&(a=t["price-precision"],r=t["amount-precision"],!0)}),t.abrupt("return",{pricePrecision:a,amountPrecision:r});case 7:case"end":return t.stop()}},t,this)}))}();function st(t){var e=G.hosts.api+"/api/huobi/v1/limit";return Z(e,t)}var at=n("//Fk"),rt=n.n(at),it=n("woOf"),ot=n.n(it),ut=n("NYxO"),ct=n("bOdI"),lt={state:{tick:{asks:[],bids:[]},trade:{},asksList:[],bidsList:[],aksFirst:[],bidsFirst:[],responseSymbol:"",lastKline:{},WS_HUOBI_STATUS:{},WS_SERVER_STATUS:{}},getters:{useWSAble:function(t){return"ok"===t.WS_HUOBI_STATUS.status&&"ok"===t.WS_SERVER_STATUS.status}},actions:{},mutations:n.n(ct)()({updateHuobiState:function(t,e){var n=!1,s="store > huobi > state";if("string"!=typeof e.stateKey||""===e.stateKey.trim())throw Error("stateKey must be a String inclusion in the  "+s);for(var a in t)if(a===e.stateKey){n=!0;break}if(!n)throw Error(e.stateKey+"不存在"+s+"中");t[e.stateKey]=e.data}},"UPTATE_DEPTH",function(t,e){t.tick=e.tick,t.asksList=e.asksList,t.bidsList=e.bidsList,t.aksFirst=e.aksFirst,t.bidsFirst=e.bidsFirst,t.responseSymbol=e.responseSymbol})};A.default.use(ut.a);var dt=new ut.a.Store({modules:{huobi:lt},strict:!1}),ht=n("n8ix"),pt={sortBy:"sumMoneny",minSumPrice:200,minPrice:1e3};var ft=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,s=void 0===n?"":n,a=e.symbol,r=void 0===a?"":a,i=e.sortBy,o=void 0===i?pt.sortBy:i,u={},c=ht(r),l=c["amount-precision"],d=c["price-precision"],h=0;h<t.length;h++){var p=t[h][1];void 0!==u[p]?(u[p].count+=1,u[p].prices.push(t[h][0])):(u[p]={},u[p].count=1,u[p].prices=[t[h][0]])}var f=[];for(var m in u){var b=u[m].prices,v=0;v=1===b.length?u[m].prices[0]:b.reduce(function(t,e){return t+e})/b.length;var y=u[m].count,_=y*m,g=_*v,k=g;if(r.endsWith("btc")?k=g*appConfig.prices.btc:r.endsWith("eth")&&(k=g*appConfig.prices.eth),y>1&&k>pt.minSumPrice||k>pt.minPrice){var S={count:y,amount:Number(m).toFixed(l),sumCount:_.toFixed(l),sumMoneny:g.toFixed(2),sumDollar:k.toFixed(2),price:v.toFixed(d),prices:u[m].prices};f.push(S)}}return"asks"===s&&"price"===o?f.sort(function(t,e){return t[o]-e[o]}):f.sort(function(t,e){return e[o]-t[o]})};ft.setConfig=function(t){ot()(pt,t)};var mt=function(t){var e={usdt:1,btc:appConfig.prices.btc,eth:appConfig.prices.eth},n=void 0;for(var s in e)if(t.endsWith(s)){n=e[s];break}return n},bt=null,vt={symbol:"btcusdt",set:function(t){ot()(vt,t)}},yt=function(t){(bt=new WebSocket("ws://"+appConfig.hosts.huobi_ws+"/huobi")).onmessage=_t,bt.onclose=gt,bt.onerror=kt};yt();function _t(t){var e=JSON.parse(t.data);Date.now();if("WS_HUOBI"===e.form)if("depth"===e.type&&e.symbol===vt.symbol){var n=e.data,s=n.bids1,a=n.bidsList,r=n.aks1,i=n.asksList;dt.commit("UPTATE_DEPTH",{asksList:i,bidsList:a,bidsFirst:s,aksFirst:r,responseSymbol:e.symbol,tick:n.tick})}else e.kline&&e.symbol===vt.symbol?dt.commit("updateHuobiState",{stateKey:"lastKline",data:e.kline}):e.trade&&e.symbol===vt.symbol&&dt.commit("updateHuobiState",{stateKey:"trade",data:e.trade});e.status&&dt.commit("updateHuobiState",{stateKey:"WS_HUOBI_STATUS",data:{type:e.type,status:e.status,msg:e.msg}})}function gt(){console.log("ws.close"),dt.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"error",msg:"close"}})}function kt(t){console.error(t),dt.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"error",msg:t}})}var St=bt,Ct={name:"App",components:{},data:function(){return{activeIndex:"charts"}},created:function(){var t=this.$router.history.current.name;this.activeIndex=t||this.activeIndex,appConfig.prices.eth=466,appConfig.prices.btc=8e3},mounted:function(){this.resize(),window.addEventListener("resize",this.resize),et("ethusdt","1min",2).then(function(t){appConfig.prices.eth=t.data[1].close}),et("btcusdt","1min",2).then(function(t){appConfig.prices.btc=t.data[1].close}),nt().then(function(){yt()})},beforeDestroy:function(){window.removeEventListener("resize",this.resize),this.$notify({title:"WS状态",message:"msg: ws_server closed",duration:3e3}),St.close()},methods:{handleClick:function(t,e){},handleSelect:function(){},resize:function(){var t=this.$refs.menu.$el.clientHeight;this.$refs.routerPage.style.maxHeight=window.innerHeight-t+"px"}}},xt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-menu",{ref:"menu",staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"charts"}},[t._v("Charts")]),t._v(" "),n("el-menu-item",{attrs:{index:"depth"}},[t._v("Depth")]),t._v(" "),n("el-menu-item",{attrs:{index:"difference"}},[t._v("Difference")]),t._v(" "),n("el-menu-item",{attrs:{index:"density"}},[t._v("Density")]),t._v(" "),n("el-menu-item",{attrs:{index:"trade"}},[t._v("Trade")])],1),t._v(" "),n("div",{ref:"routerPage",staticClass:"page-content"},[n("keep-alive",[n("router-view")],1)],1)],1)},staticRenderFns:[]};var wt=n("VU/8")(Ct,xt,!1,function(t){n("0N9N"),n("rmjc")},null,null).exports,jt=n("/ocq"),Dt=n("Dd8w"),Lt=n.n(Dt);function Ft(t){var e=G.hosts.api+"/api/chart/amount?"+H.a.stringify({symbol:t});return tt(e)}function Ot(t){var e=G.hosts.api+"/api/chart/trade?"+H.a.stringify({symbol:t});return tt(e)}var Tt,Vt,qt=null,Et=null,Pt=null,zt=null,At=null,Mt=function(){var t=$()(W.a.mark(function t(){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"LqmE")).then(function(t){Pt=(Et=t).Chart,Et.track(!1)});case 2:return t.next=4,rt.a.all([Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"H4Ae")),Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"2gyv")),Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"kXdy")).then(function(t){Et.Chart.plugins.register(t)})]);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),Wt=(Tt=$()(W.a.mark(function t(){return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(4).then(n.bind(null,"b7ct")).then(function(t){Pt=(qt=t).Chart,qt.track(!1)});case 2:return t.next=4,rt.a.all([n.e(5).then(n.bind(null,"F21L")).then(function(t){zt=t})]);case 4:case"end":return t.stop()}},t,this)})),function(){return Tt.apply(this,arguments)}),Bt=(Vt=$()(W.a.mark(function t(){var e;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=[]).push(n.e(7).then(n.bind(null,"ifQC")).then(function(t){At=t})),G.isMobile?e.push(Mt()):e.push(Wt()),t.next=5,rt.a.all(e);case 5:return t.abrupt("return",{Chart:Pt,F2:Et,G2:qt,Slider:zt,DataSet:At});case 6:case"end":return t.stop()}},t,this)})),function(){return Vt.apply(this,arguments)});function Nt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dataSetConfig,n=t.transformConfig;if(!e.state)throw Error("dataSetConfig.sate must be a Object");var s=new At(e),a=s.createView();return a.source(s.state.sourceData),Array.isArray(n)&&(n.forEach(function(t){a.transform(t)}),void 0!==e.state.start&&void 0!==e.state.end&&a.transform({type:"filter",callback:function(t){var e=new Date(t.time).getTime();return e>=s.state.start&&e<=s.state.end}})),{dataSet:s,dataView:a}}function Ut(t,e,n){var s=new zt({container:n,width:"auto",height:26,padding:G.isMobile?[0,10,0,50]:[0,100,0,120],start:t.state.start,end:t.state.end,xAxis:"time",yAxis:"value",scales:{time:{type:"time",tickCount:100,mask:"M/DD H:mm:ss"}},data:e,backgroundChart:{type:"line"},onChange:function(e){var n=e.startValue,s=e.endValue;t.setState("start",n),t.setState("end",s)}});return s.render(),s}var $t={bids_max_1:"#006633",asks_max_1:"#990000",buy_1:"#03C087",sell_1:"#EF5555"},Rt=[$t.buy_1,$t.sell_1],Ht=function(t){return t/1e4+"万usdt ("+parseInt(t/appConfig.prices.btc)+"฿)"},It={name:"DepthLineChart",components:{},data:function(){return{}},props:{data:Array,symbol:String},watch:{symbol:function(t){this.getData(t)}},mounted:function(){var t=this;Bt().then(function(e){var n=function(t,e,n){var s=Nt({dataSetConfig:{state:{sourceData:e,start:Date.now()-864e5,end:Date.now()}},transformConfig:[{type:"fold",fields:["bids_max_1","asks_max_1","buy_1","sell_1"],key:"type",value:"value",retains:["time","price"]}]}),a=s.dataSet,r=s.dataView,i=new t({container:n,height:500,forceFit:!0,padding:G.isMobile?[50,10,50,40]:[50,50,80,120]});return i.source(r,{time:{type:"time",nice:!1,mask:"M/DD H:mm:ss",tickCount:12}}),i.axis("value",{label:{formatter:Ht}}),i.tooltip({crosshairs:{type:"line"}}),i.line({sortable:!1}).position("time*value").color("type",function(t){return $t[t]}),i.legend({position:"top-right"}),i.render(),{chart:i,dataSet:a,dataView:r}}(e.Chart,[],t.$refs.container),s=n.dataSet,a=n.dataView,r=n.chart;t.dataSet=s,t.dataView=a,t.chart=r,t.slider=Ut(s,a,t.$refs.slider)}).then(function(){t.getData(t.symbol)})},methods:{getData:function(t){var e=this;this.$emit("onloadstart"),Ft(t).then(function(t){var n=t.data;if(e.chart&&0!==n.length){var s=new Date(n[parseInt(n.length/3)].time).getTime(),a=new Date(n[n.length-1].time).getTime();e.dataSet.setState("sourceData",n),e.dataView.source(e.dataSet.state.sourceData),e.slider.start=s,e.slider.end=a,e.slider.changeData(e.dataView.rows),e.dataSet.setState("start",s),e.dataSet.setState("end",a)}}).finally(function(){e.$emit("onloaded")})}}};var Kt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"container"}),this._v(" "),e("div",{ref:"slider",staticClass:"chart-slider"})])},staticRenderFns:[]};var Yt=n("VU/8")(It,Kt,!1,function(t){n("mSyf")},null,null).exports,Jt={name:"DepthLineChart",data:function(){return{}},props:{data:Array,symbol:String},watch:{symbol:function(t){this.getData(t)}},mounted:function(){var t=this;Bt().then(function(e){var n=function(t,e,n){var s=Nt({dataSetConfig:{state:{sourceData:e}},transformConfig:[{type:"fold",fields:["bids_max_1","asks_max_1","buy_1","sell_1"],key:"type",value:"value",retains:["time","price"]}]}),a=s.dataSet,r=s.dataView,i=new t({el:n,pixelRatio:window.devicePixelRatio,padding:[14,"auto","auto"],height:400,width:n.parentNode.clientWidth,animate:!1});return i.source(r.rows,{time:{type:"timeCat",nice:!1,range:[0,1],mask:"M/DD H:mm:ss",tickInterval:6e4},type:{values:["bids_max_1","asks_max_1","buy_1","sell_1"]}}),i.axis("value",{label:function(t){return{text:Ht(t)}}}),i.legend(!1),i.tooltip(!1),i.line({sortable:!1}).position("time*value").color("type",function(t){return $t[t]}).animate({appear:{duration:500},update:{animation:"lineUpdate",duration:500}}),i.scrollBar({mode:"x",xStyle:{offsetY:-5}}),i.interaction("pinch",{minScale:1,maxScale:6}).interaction("pan"),i.render(),{chart:i,dataSet:a,dataView:r}}(e.Chart,[],t.$refs.canvas),s=n.dataSet,a=n.dataView,r=n.chart;t.dataSet=s,t.dataView=a,t.chart=r}).then(function(){t.getData()})},methods:{getData:function(t){var e=this;this.$emit("onloadstart"),Ft(t).then(function(t){var n=t.data;e.chart&&0!==n.length&&(e.dataSet.setState("sourceData",n),e.dataView.source(e.dataSet.state.sourceData),e.chart.changeData(e.dataView.rows))}).finally(function(){e.$emit("onloaded")})}}};var Xt={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas"})},staticRenderFns:[]};var Gt={name:"DepthLineChartWrap",components:{DepthLineChart:Yt,DepthLineChart_M:n("VU/8")(Jt,Xt,!1,function(t){n("SHjb")},null,null).exports},data:function(){return{loading:!0}},props:{symbol:{type:String,default:"btcusdt"}},computed:{currentComponent:function(){return appConfig.isMobile?"DepthLineChart_M":"DepthLineChart"}},methods:{onloaded:function(){this.loading=!1},onloadstart:function(){this.loading=!0}}},Qt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"charts-container"},[e(this.currentComponent,{tag:"component",attrs:{symbol:this.symbol},on:{onloaded:this.onloaded,onloadstart:this.onloadstart}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("h3",[this._v("挂单资金")])])}]},Zt=n("VU/8")(Gt,Qt,!1,null,null,null).exports,te={name:"LineCharts",data:function(){return{}},props:{data:{type:Array,default:function(){return[]}}},watch:{data:function(t){this.chart&&this.renderChart(t)}},mounted:function(){var t=this;Bt().then(function(e){var n=function(t,e,n){var s=Nt({dataSetConfig:{state:{sourceData:e}},transformConfig:[{type:"aggregate",fields:["buy","sell"],operations:["sum","sum"],as:["流入","流出"]},{type:"fold",fields:["流入","流出"],key:"type",value:"sum"},{type:"percent",field:"sum",dimension:"type",as:"percent"}]}),a=s.dataSet,r=s.dataView,i=new t({container:n,height:220,width:220,forceFit:!0});return i.source(r,{sum:{formatter:function(t){return parseInt(t/1e4)+"万"}}}),i.coord("theta"),i.tooltip({showTitle:!1}),i.intervalStack().position("percent").color("type",Rt).label("sum",{offset:-30,textStyle:{rotate:0,textAlign:"center",shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}}).tooltip("type*sum",function(t,e){return{name:t,value:e=parseInt(e/1e4)+"万$"}}).style({lineWidth:1,stroke:"#fff"}),i.legend(!1),i.render(),{chart:i,dataSet:a,dataView:r}}(e.G2.Chart,[],t.$refs.container),s=n.dataSet,a=n.dataView,r=n.chart;t.dataSet=s,t.dataView=a,t.chart=r}).then(function(){t.renderChart(t.data)})},methods:{renderChart:function(t){if(this.chart)return this.dataSet.setState("sourceData",t),void this.dataView.source(this.dataSet.state.sourceData)}}};var ee={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-pai-chart"},[e("div",{ref:"container"})])},staticRenderFns:[]};var ne={name:"TradeBarChart",components:{TradePieChart:n("VU/8")(te,ee,!1,function(t){n("IJ3g"),n("fhLv")},"data-v-1b9394d1",null).exports},data:function(){return{loading:!0,data:[]}},props:{symbol:String},watch:{symbol:function(t){this.getData(t)}},mounted:function(){var t=this;Bt().then(function(e){var n=function(t,e,n){var s=Nt({dataSetConfig:{state:{sourceData:e,start:Date.now()-864e5,end:Date.now()}},transformConfig:[{type:"fold",fields:["buy","sell"],key:"type",value:"value",retains:["time"]}]}),a=s.dataSet,r=s.dataView,i=new t({container:n,height:500,forceFit:!0,padding:G.isMobile?[10,10,20,40]:[50,50,80,120]});return i.source(r,{time:{type:"time",nice:!1,mask:"M/DD H:mm:ss",tickCount:12}}),i.axis("value",{label:{formatter:Ht}}),i.tooltip({crosshairs:{type:"line"}}),i.intervalStack().position("time*value").color("type",Rt),i.legend({position:"top-right",offsetY:G.isMobile?0:-20}),i.render(),{chart:i,dataSet:a,dataView:r}}(e.G2.Chart,[],t.$refs.container),s=n.dataSet,a=n.dataView,r=n.chart;t.dataSet=s,t.dataView=a,t.chart=r,t.slider=Ut(s,a,t.$refs.slider)}).then(function(){t.getData(t.symbol)})},methods:{getData:function(t){var e=this;this.$emit("onloadstart"),Ot(t).then(function(t){var n=e.data=t.data;if(e.chart&&0!==n.length){var s=new Date(n[parseInt(n.length/1.5)].time).getTime(),a=new Date(n[n.length-1].time).getTime();e.dataSet.setState("sourceData",n),e.dataView.source(e.dataSet.state.sourceData),e.slider.start=s,e.slider.end=a,e.slider.changeData(e.dataView.rows),e.dataSet.setState("start",s),e.dataSet.setState("end",a)}}).finally(function(){e.$emit("onloaded")})}}};var se={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-chart"},[e("div",{ref:"container"}),this._v(" "),e("div",{ref:"slider",staticClass:"chart-slider"}),this._v(" "),e("TradePieChart",{attrs:{data:this.data}})],1)},staticRenderFns:[]};var ae=n("VU/8")(ne,se,!1,function(t){n("WOq4")},null,null).exports,re={name:"TradeBarChart_M",data:function(){return{}},props:{symbol:String},watch:{symbol:function(t){this.getData(t)}},mounted:function(){var t=this;Bt().then(function(e){var n=function(t,e,n){var s=Nt({dataSetConfig:{state:{sourceData:e}},transformConfig:[{type:"fold",fields:["buy","sell"],key:"type",value:"value",retains:["time"]}]}),a=s.dataSet,r=s.dataView,i=new t({el:n,pixelRatio:window.devicePixelRatio,padding:[14,"auto","auto"],height:400,width:n.parentNode.clientWidth});return i.source(r,{time:{type:"timeCat",nice:!1,range:[0,1],mask:"M/DD H:mm:ss",tickCount:5}}),i.axis("value",{label:function(t){return{text:Ht(t)}}}),i.tooltip(!1),i.legend(!1),i.interval().position("time*value").color("type",Rt).adjust("stack"),i.scrollBar({mode:"x",xStyle:{offsetY:-5}}),i.render(),i.interaction("pinch",{minScale:0,maxScale:6,onProcess:function(t){console.log(t)}}).interaction("pan"),{chart:i,dataSet:a,dataView:r}}(e.Chart,[],t.$refs.canvas),s=n.dataSet,a=n.dataView,r=n.chart;t.dataSet=s,t.dataView=a,t.chart=r}).then(function(){t.getData(t.symbol)})},methods:{getData:function(t){var e=this;this.$emit("onloadstart"),Ot(t).then(function(t){var n=t.data;e.chart&&0!==n.length&&(e.dataSet.setState("sourceData",n),e.dataView.source(e.dataSet.state.sourceData),e.chart.changeData(e.dataView.rows))}).finally(function(){e.$emit("onloaded")})}}};var ie={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas"})},staticRenderFns:[]};var oe={name:"TradeBarChartWrap",components:{TradeBarChart:ae,TradeBarChart_M:n("VU/8")(re,ie,!1,function(t){n("7NY6")},null,null).exports},data:function(){return{loading:!0}},props:{symbol:{type:String,default:"btcusdt"}},computed:{currentComponent:function(){return appConfig.isMobile?"TradeBarChart_M":"TradeBarChart"}},methods:{onloaded:function(){this.loading=!1},onloadstart:function(){this.loading=!0}}},ue={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"charts-container"},[e(this.currentComponent,{tag:"component",attrs:{symbol:this.symbol},on:{onloaded:this.onloaded,onloadstart:this.onloadstart}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("h3",[this._v("资金流入流出")])])}]},ce={name:"Charts",components:{DepthLineChart:Zt,TradeBarChart:n("VU/8")(oe,ue,!1,null,null,null).exports},data:function(){return{symbols:[],selectedSymbol:""}},computed:Lt()({},Object(ut.c)({bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol},trade:function(t){return t.huobi.trade}})),mounted:function(){this.getWatchSymbols()},beforeDestroy:function(){},methods:{getWatchSymbols:function(){var t,e=this;(t=G.hosts.api+"/api/chart/watchSymbols",tt(t)).then(function(t){e.symbols=t.data,e.selectedSymbol=e.symbols[0]})}}},le={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-page"},[n("div",{staticClass:"ctrl"},[n("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.selectedSymbol,callback:function(e){t.selectedSymbol=e},expression:"selectedSymbol"}},t._l(t.symbols,function(e){return n("el-option",{key:e,attrs:{value:e}},[t._v("\n              "+t._s(e)+"\n          ")])}))],1),t._v(" "),n("el-card",{staticClass:"chart-wrap"},[n("DepthLineChart",{attrs:{symbol:t.selectedSymbol}})],1),t._v(" "),n("el-card",{staticClass:"chart-wrap"},[n("TradeBarChart",{attrs:{trade:t.trade,symbol:t.selectedSymbol}})],1)],1)},staticRenderFns:[]};var de=n("VU/8")(ce,le,!1,function(t){n("mqrp")},null,null).exports,he={name:"DepthTable",data:function(){return{itemPrices:[],dialogVisible:!1}},props:{data:{type:Array,default:function(){return[]}},quoteCurrency:String},mounted:function(){},methods:{showAllPrices:function(t){this.dialogVisible=!0,this.itemPrices=t}}},pe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"depth-table-wrap"},[n("table",[n("thead",[n("tr",[n("th",[t._v("\n              count\n              ")]),t._v(" "),n("th",[t._v("\n              amount\n              ")]),t._v(" "),n("th",[t._v("\n              sumCount\n              ")]),t._v(" "),n("th",[t._v("\n              sum("+t._s(t.quoteCurrency)+")\n              ")]),t._v(" "),n("th",[t._v("\n              $($/k)\n              ")]),t._v(" "),n("th",[t._v("\n              price("+t._s(t.quoteCurrency)+")\n              ")])])]),t._v(" "),n("tbody",t._l(t.data,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e.count))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[t._v(t._s(e.sumCount))]),t._v(" "),n("td",[t._v(t._s(e.sumMoneny))]),t._v(" "),n("td",[t._v(t._s((e.sumDollar/1e3).toFixed(3)))]),t._v(" "),n("td",[n("span",[t._v(t._s(e.price))]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(n){t.showAllPrices(e.prices)}}},[t._v("\n                  查看全部\n              ")])],1)])}))]),t._v(" "),n("el-dialog",{attrs:{title:"全部价格",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("ul",{staticClass:"all-price-list"},t._l(t.itemPrices,function(e){return n("li",{key:e},[t._v(t._s(e))])})),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var fe="btcusdt",me={name:"Depth",components:{DepthTable:n("VU/8")(he,pe,!1,function(t){n("shHP")},null,null).exports},data:function(){return{quoteCurrency:"usdt",baseCurrency:"btc",sortByValue:"sumMoneny",subscribeLoading:!1,subscribeDisable:!1,tabVal:"bids",isMobile:appConfig.isMobile}},computed:Lt()({},Object(ut.c)({status:function(t){return t.huobi.WS_HUOBI_STATUS},bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol}}),Object(ut.b)(["useWSAble"])),watch:{bidsList:function(t){this.subscribeLoading=!(t.length>0)},status:function(t){this.$notify({title:"WS状态",message:"msg: "+N()(t.msg),duration:3e3})},useWSAble:function(t){}},created:function(){},mounted:function(){var t=this;St.onopen=function(e){console.log("open"),St.send(N()({type:"sub",value:"market."+fe+".depth.step0",symbol:fe})),St.send(N()({type:"sub",value:"market."+fe+".kline.1min",symbol:fe})),t.$notify({title:"WS状态",message:"msg: ws_server open",duration:3e3}),t.$store.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"ok",msg:"open"}})}},beforeDestroy:function(){},methods:{reset:function(){var t;t={type:"ws-huobi",value:"reset"},bt.send(N()(t))},handleClick:function(){},subscribeDepth:function(){var t=this.baseCurrency+this.quoteCurrency;this.$store.commit("UPTATE_DEPTH",{tick:{asks:[],bids:[]},asksList:[],bidsList:[],bidsFirst:[],aksFirst:[],responseSymbol:""}),St.send(N()({type:"unsub",value:"market."+fe+".depth.step0",symbol:fe})),St.send(N()({type:"unsub",value:"market."+fe+".kline.1min",symbol:fe})),St.send(N()({type:"sub",value:"market."+t+".depth.step0",symbol:t})),St.send(N()({type:"sub",value:"market."+t+".kline.1min",symbol:t})),fe=t,vt.set({symbol:t})},sortBy:function(){}}},be={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"depth-page"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{xs:12,sm:3,md:3,lg:3,xl:1}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入内容",size:"small",clearable:"",disabled:!1},model:{value:t.baseCurrency,callback:function(e){t.baseCurrency=e},expression:"baseCurrency"}})],1),t._v(" "),n("el-col",{attrs:{xs:12,sm:3,md:3,lg:3,xl:1}},[n("el-select",{attrs:{placeholder:"请选择",size:"small",disabled:!1},model:{value:t.quoteCurrency,callback:function(e){t.quoteCurrency=e},expression:"quoteCurrency"}},[n("el-option",{attrs:{value:"usdt"}},[t._v("usdt")]),t._v(" "),n("el-option",{attrs:{value:"btc"}},[t._v("btc")]),t._v(" "),n("el-option",{attrs:{value:"eth"}},[t._v("eth")])],1)],1),t._v(" "),n("el-col",{attrs:{xs:12,sm:3,md:8,lg:3,xl:1}},[n("el-button",{attrs:{type:"primary",loading:t.subscribeLoading,disabled:t.subscribeDisable,size:"small"},on:{click:t.subscribeDepth}},[t._v("查挂单\n      ")])],1),t._v(" "),n("el-col",{attrs:{xs:12,sm:3,md:3,lg:3,xl:1}},[n("el-select",{attrs:{placeholder:"请选择",size:"small",disabled:!0},on:{change:t.sortBy},model:{value:t.sortByValue,callback:function(e){t.sortByValue=e},expression:"sortByValue"}},[n("el-option",{attrs:{value:"sumMoneny"}},[t._v("按sumMoneny排序")]),t._v(" "),n("el-option",{attrs:{value:"price"}},[t._v("按price排序")])],1)],1)],1),t._v(" "),n("div",[n("span",[t._v("当前价"+t._s(t.lastKline.close))])]),t._v(" "),t.isMobile?t._e():n("div",{staticClass:"depth-table-wap"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("span",[t._v("买单("+t._s(t.bidsList.length)+")")]),t._v(" "),n("span",[t._v("买1:"+t._s(t.bidsFirst))]),t._v(" "),n("DepthTable",{attrs:{data:t.bidsList,quoteCurrency:t.quoteCurrency}})],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("span",[t._v("卖单("+t._s(t.asksList.length)+")")]),t._v(" "),n("span",[t._v("卖1:"+t._s(t.aksFirst))]),t._v(" "),n("DepthTable",{attrs:{data:t.asksList,quoteCurrency:t.quoteCurrency}})],1)],1)],1),t._v(" "),t.isMobile?n("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.tabVal,callback:function(e){t.tabVal=e},expression:"tabVal"}},[n("el-tab-pane",{attrs:{label:"买挂单",name:"bids"}},[n("span",[t._v("买单("+t._s(t.bidsList.length)+")")]),t._v(" "),n("span",[t._v("买1:"+t._s(t.bidsFirst))]),t._v(" "),n("DepthTable",{attrs:{data:t.bidsList,quoteCurrency:t.quoteCurrency}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"卖挂单",name:"asks"}},[n("span",[t._v("卖单("+t._s(t.asksList.length)+")")]),t._v(" "),n("span",[t._v("卖1:"+t._s(t.aksFirst))]),t._v(" "),n("DepthTable",{attrs:{data:t.asksList,quoteCurrency:t.quoteCurrency}})],1)],1):t._e()],1)},staticRenderFns:[]};var ve=n("VU/8")(me,be,!1,function(t){n("5u3S")},null,null).exports;var ye={name:"Difference",components:{},data:function(){return{list:[],isLoading:!1,orderByProperty:"tickDis"}},created:function(){},mounted:function(){this.seachAble=!0,this.getDiffSymbols()},beforeDestroy:function(){},methods:{start:function(){},getDiffSymbols:function(){var t,e=this;(t=G.hosts.api+"/api/diff/diffSymbols",tt(t)).then(function(t){e.symbols=t.data})},getDiffData:function(t){var e=this;getCharacteristic(t).then(function(t){e.list.push(t)})},orderBy:function(){var t=this;this.list.sort(function(e,n){return n[t.orderByProperty]-e[t.orderByProperty]})},stopSearch:function(){this.seachAble=!1}}},_e={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("el-button",{attrs:{type:"primary",loading:t.isLoading,size:"small"},on:{click:t.start}},[t._v("开始")]),t._v(" "),n("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.orderByProperty,callback:function(e){t.orderByProperty=e},expression:"orderByProperty"}},[n("el-option",{attrs:{value:"tickDis"}},[t._v("买一/卖一(总价格)")]),t._v(" "),n("el-option",{attrs:{value:"maxCountDis"}},[t._v("买单数(max)/卖单数(max)")]),t._v(" "),n("el-option",{attrs:{value:"lengthDis"}},[t._v("buyCount / sellCount")]),t._v(" "),n("el-option",{attrs:{value:"buy1Money"}},[t._v("买一总价($)")]),t._v(" "),n("el-option",{attrs:{value:"sell1Money"}},[t._v("卖一总价($)")])],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.orderBy}},[t._v("排序")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.stopSearch}},[t._v("中断自动查询")])],1),t._v(" "),n("div",{ref:"tickList",staticStyle:{overflow:"auto"}},[n("div",[n("table",[t._m(0),t._v(" "),n("tbody",t._l(t.list,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e.symbol))]),t._v(" "),n("td",[t._v(t._s(e.tickDis))]),t._v(" "),n("td",[t._v(t._s(e.maxCountDis))]),t._v(" "),n("td",[t._v(t._s(e.lengthDis))]),t._v(" "),n("td",[t._v(t._s((e.buy1Money/1e3).toFixed(2)))]),t._v(" "),n("td",[t._v(t._s((e.sell1Money/1e3).toFixed(2)))])])}))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("\n                  Symbols\n                  ")]),t._v(" "),n("th",[t._v("\n                  买一/卖一(价格)\n                  ")]),t._v(" "),n("th",[t._v("\n                  买单数(max)/卖单数(max)\n                  ")]),t._v(" "),n("th",[t._v("\n                  buyCount / sellCount\n                  ")]),t._v(" "),n("th",[t._v("\n                  买一总价($/k)\n                  ")]),t._v(" "),n("th",[t._v("\n                  卖一总价($/k)\n                  ")])])])}]};var ge=n("VU/8")(ye,_e,!1,function(t){n("qbW9")},null,null).exports,ke=n("PJh5"),Se=n.n(ke),Ce=function(t,e){var n="number"==typeof t?t:Date.parse(t),s=setInterval(function(){Date.now()>n&&(e&&e(),clearInterval(s))},1e3)};function xe(t){return JSON.parse(N()(t)).slice(0,10).sort(function(t,e){return Number(t.price)-Number(e.price)})}var we=function(t){var e,n,s=t.bidsList,a=t.asksList,r=t.buyCount,i=t.sellCount,o=(t.preSame,xe(s)),u=xe(a);if(!(o.length<=2)){for(var c=0,l=0,d=[],h=o.length>u.length?u.length:o.length,p=0;p<h/2;p++)d.push({buyPrice:o[p].price,sellPrice:u[h-p-1].price});o.forEach(function(t){c+=Number(t.price)}),u.forEach(function(t){l+=Number(t.price)}),e=c/o.length,n=l/u.length;o.length;var f=Math.round(o.length/2)+r;console.log(o),u.length>5?i:1;var m=Math.round(u.length/2)-i;return console.log(u),{buyPrice:o[f]?o[f].price:o[0].price,sellPrice:u[m]?u[m].price:u[0].price,asksAvg:n,bindsAvg:e,bak:d}}},je=n("8k4B"),De=!1,Le={name:"Market",components:{},data:function(){return{list:[],symbol:"pai",amount:"",price:"",type:"buy-limit",buttonLoading:!1,openOrders:[],quoteCurrency:"btc",amountPrecision:4,testPrice:10,buyCount:3,sellCount:3}},computed:Lt()({},Object(ut.c)({bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},responseSymbol:function(t){return t.huobi.responseSymbol}})),created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{trade:function(){var t=this;return this.buttonLoading=!0,console.log(this.type.search("buy")),st({symbol:this.symbol+this.quoteCurrency,amount:this.amount,price:this.price,type:this.type,action:this.type.indexOf("buy")>-1?"buy":"sell"}).then(function(e){"ok"===e.status&&void 0!==e.data?t.$notify({title:"下单状态",message:"msg: 下单成功",duration:3e3}):t.$notify({title:"下单状态",message:"msg: "+e["err-code"],duration:3e3}),t.getOpenOrders()}).finally(function(){t.buttonLoading=!1})},autoTrade:function(){var t=$()(W.a.mark(function t(){var e,n,s,a,r,i,o,u,c,l,d,h,p,f=this;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.symbol+this.quoteCurrency===this.responseSymbol){t.next=2;break}return t.abrupt("return");case 2:return this.buttonLoading=!0,e=null,t.prev=4,t.next=7,void 0,m=G.hosts.api+"/api/huobi/v1/get_balance",tt(m).then(function(t){return t.data});case 7:e=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),this.autoTrade();case 13:if(n="",s="",null!==e){t.next=19;break}throw this.buttonLoading=!1,this.autoTrade(),Error("balanceList没有查到");case 19:return e.list.forEach(function(t){t.currency===f.quoteCurrency&&"trade"===t.type&&(n=Number(t.balance)),t.currency===f.symbol&&"trade"===t.type&&(s=Number(t.balance))}),t.next=22,et(this.symbol+this.quoteCurrency,"1min",2);case 22:if(null!==(a=t.sent).data){t.next=26;break}return this.buttonLoading=!1,t.abrupt("return");case 26:return r=a.data[0].close,i=n/r,o={buyCount:0,sellCount:0},t.next=31,this.getOpenOrders();case 31:if(this.openOrders.forEach(function(t){"buy-limit"===t.type?o.buyCount++:o.sellCount++}),u=this.testPrice,c=(c="usdt"===this.quoteCurrency?u/r:u/appConfig.prices.btc/r).toFixed(this.amountPrecision),l=we({bidsList:this.bidsList,asksList:this.asksList,buyCount:this.buyCount-o.buyCount,sellCount:this.sellCount-o.sellCount}),console.log(l),d={},h=null,Array.isArray(this.openOrders)&&this.openOrders.forEach(function(t,e){void 0===d[t.price]?d[t.price]=1:h=t}),null===h){t.next=51;break}return De=!0,p=h.type.indexOf("buy")>-1?"buy":"sell",this.buyCount=l.bak.length,this.sellCount=l.bak.length,t.next=47,this.cancelOrder(h.id);case 47:return t.next=49,st({symbol:this.symbol+this.quoteCurrency,amount:h.amount,price:l.bak[je(0,l.bak.length-1)]["buy"===p?"buyPrice":"sellPrice"],type:h.type,action:p});case 49:return t.next=51,this.getOpenOrders();case 51:if(t.prev=51,!(i>c&&o.buyCount<this.buyCount)){t.next=57;break}return t.next=55,st({symbol:this.symbol+this.quoteCurrency,amount:c,price:l.buyPrice,type:"buy-limit",action:"buy",preSame:De});case 55:return t.next=57,this.getOpenOrders();case 57:if(!(s>c&&o.sellCount<this.sellCount)){t.next=62;break}return t.next=60,st({symbol:this.symbol+this.quoteCurrency,amount:c,price:l.sellPrice,type:"sell-limit",action:"sell",preSame:De});case 60:return t.next=62,this.getOpenOrders();case 62:t.next=67;break;case 64:t.prev=64,t.t1=t.catch(51),this.autoTrade();case 67:this.buttonLoading=!1,setTimeout(function(){f.checkOrder()},2e4);case 69:case"end":return t.stop()}var m},t,this,[[4,10],[51,64]])}));return function(){return t.apply(this,arguments)}}(),checkOrder:function(){var t=$()(W.a.mark(function t(){var e,n,s,a,r,i,o,u=this;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(t,e){return Math.abs(t-Number(e))/e},t.next=3,this.getOpenOrders();case 3:if(Array.isArray(this.openOrders)&&0!==this.openOrders.length&&this.symbol+this.quoteCurrency===this.responseSymbol){t.next=5;break}return t.abrupt("return");case 5:if(e=we({bidsList:this.bidsList,asksList:this.asksList,buyCount:1,sellCount:1}),n=null,s=null,a=null,this.openOrders.sort(function(t,e){return Number(e.price)-Number(t.price)}),r={},i=null,Array.isArray(this.openOrders)&&this.openOrders.forEach(function(t,e){"buy-limit"===t.type?(null===n&&(n=t),a=t):"sell-limit"===t.type&&null===s&&(s=t),void 0===r[t.price]?r[t.price]=1:i=t}),null===i){t.next=19;break}return De=!0,t.next=17,this.cancelOrder(i.id);case 17:t.next=20;break;case 19:De=!1;case 20:if(!(null!==n&&o(e.bindsAvg,n.price)>.04)){t.next=23;break}return t.next=23,this.cancelOrder(n.id);case 23:if(!(null!==a&&n!==a&&o(e.bindsAvg,a.price)>.04)){t.next=26;break}return t.next=26,this.cancelOrder(a.id);case 26:if(!(null!==s&&o(e.asksAvg,s.price)>.04)){t.next=29;break}return t.next=29,this.cancelOrder(s.id);case 29:setTimeout(function(){u.autoTrade()},2e4);case 30:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getOpenOrders:function(){var t=$()(W.a.mark(function t(e){var n,s,a,r=this;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.buttonLoading=!0,t.next=3,nt();case 3:return n=t.sent,s=0,a=0,n.some(function(t){return t["base-currency"]===r.symbol&&t["quote-currency"]===r.quoteCurrency&&(s=t["price-precision"],a=t["amount-precision"],r.amountPrecision=a,!0)}),t.abrupt("return",(e={symbol:this.symbol+this.quoteCurrency,side:"buy"},void 0,i=G.hosts.api+"/api/huobi/v1/openOrders?"+H.a.stringify(e),tt(i)).then(function(t){Array.isArray(t.data)?(t.data.forEach(function(t){t["created-at"]=Se()(t["created-at"]).format("YYYY/MM/DD h:mm:ss"),t.amount=Number(t.amount).toFixed(a),t.price=Number(t.price).toFixed(s),t["field-amount"]=Number(t["field-amount"]).toFixed(a)}),r.openOrders=t.data):r.openOrders=[]}).finally(function(){r.buttonLoading=!1}));case 8:case"end":return t.stop()}var e,i},t,this)}));return function(e){return t.apply(this,arguments)}}(),cancelOrder:function(t){var e=this;return this.buttonLoading=!0,function(t){var e=G.hosts.api+"/api/huobi/v1/cancelOrder";return Z(e,{orderId:t})}(t).then(function(t){e.getOpenOrders(),e.buttonLoading=!1})},timeoutBuy:function(){var t=$()(W.a.mark(function t(){var e=this;return W.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ce("2018-07-25T15:00:00",function(){e.trade()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},Fe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"market"},[n("div",[n("table",[n("thead",[n("tr",[n("th",[t._v("\n                       时间\n                       ")]),t._v(" "),n("th",[t._v("\n                       交易对\n                       ")]),t._v(" "),n("th",[t._v("\n                       方向\n                       ")]),t._v(" "),n("th",[t._v("\n                       价格("+t._s(t.quoteCurrency)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       数量 ("+t._s(t.symbol)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       委托总额("+t._s(t.quoteCurrency)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       已成交\n                       ")]),t._v(" "),n("th",[t._v("\n                       未成交\n                       ")]),t._v(" "),n("th",[t._v("\n                       操作\n                       ")])])]),t._v(" "),n("tbody",t._l(t.openOrders,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e["created-at"]))]),t._v(" "),n("td",[t._v(t._s(e.symbol))]),t._v(" "),n("td",[t._v(t._s(e.type))]),t._v(" "),n("td",[t._v(t._s(e.price))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[t._v(t._s(Number(e.amount*e.price).toFixed(t.amountPrecision)))]),t._v(" "),n("td",[t._v(t._s(e["field-amount"]))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[n("el-button",{attrs:{size:"small"},on:{click:function(n){t.cancelOrder(e.id)}}},[t._v("\n                           撤单\n                       ")])],1)])}))])])])},staticRenderFns:[]};var Oe=n("VU/8")(Le,Fe,!1,function(t){n("EK+F")},null,null).exports,Te={btcusdt:{len:.05,step:.001}};var Ve=function(t){var e=t.asksList,n=t.bidsList,s=t.currentPrice,a=t.symbol,r={},i={},o=JSON.parse(N()(e)),u=JSON.parse(N()(n)),c=mt(a),l=.05,d=.001;Te[a]&&(l=Te[a].len,d=Te[a].step);for(var h=.001;h<l;h+=d){var p=s*(1-(h=Number(h.toFixed(6)))),f=s*(1+h);r[-h]={count:0,price:p,sumMoneny:0},i[h]={count:0,price:f,sumMoneny:0};t:for(var m=0;m<o.length;m++){var b=o[m][0];if(f<Number(b))break t;i[h].count++,i[h].sumMoneny+=o[m][1]*b*c,o.splice(h,1),m--}t:for(var v=0;v<u.length;v++){var y=u[v][0];if(p>Number(y))break t;r[-h].count++,r[-h].sumMoneny+=u[v][1]*y*c,u.splice(h,1),v--}}return{buy:r,sell:i}};Ve.setConfig=function(t){ot()(t,t)};var qe=Ve,Ee={name:"Table",data:function(){return{}},props:{data:{type:Object,default:function(){return{}}},quoteCurrency:String},mounted:function(){},methods:{}},Pe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",[n("thead",[n("tr",[n("th",[t._v("\n              %\n              ")]),t._v(" "),n("th",[t._v("\n              price("+t._s(t.quoteCurrency)+")\n              ")]),t._v(" "),n("th",[t._v("\n              count\n              ")]),t._v(" "),n("th",[t._v("\n              sum("+t._s(t.quoteCurrency)+")\n              ")])])]),t._v(" "),n("tbody",t._l(t.data,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s((100*s).toFixed(2)))]),t._v(" "),n("td",[t._v(t._s(e.price.toString().length>10?e.price.toFixed(8):e.price))]),t._v(" "),n("td",[t._v(t._s(e.count))]),t._v(" "),n("td",[t._v(t._s(parseInt(e.sumMoneny)))])])}))])])},staticRenderFns:[]};var ze={name:"Density",components:{DensityTable:n("VU/8")(Ee,Pe,!1,function(t){n("1c4S")},null,null).exports},data:function(){return{buyDensityList:{},sellDensityList:{}}},computed:Lt()({},Object(ut.c)({tick:function(t){return t.huobi.tick},bidsFirst:function(t){return t.huobi.bidsFirst},aksFirst:function(t){return t.huobi.aksFirst},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol}}),Object(ut.b)(["useWSAble"]),{quoteCurrency:function(){return this.responseSymbol?this.responseSymbol.endsWith("btc")?"btc":this.responseSymbol.endsWith("eth")?"eth":void 0:"usdt"}}),watch:{tick:function(){var t=qe({asksList:this.tick.asks,bidsList:this.tick.bids,currentPrice:this.lastKline.close,symbol:this.responseSymbol});this.buyDensityList=t.buy,this.sellDensityList=t.sell}},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{}},Ae={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"tickList",staticClass:"tickList"},[e("div",{staticClass:"flex-row container"},[e("div",{staticClass:"flex-1"},[e("DensityTable",{attrs:{data:this.buyDensityList,quoteCurrency:this.quoteCurrency}})],1),this._v(" "),e("div",{staticClass:"flex-1"},[e("DensityTable",{attrs:{data:this.sellDensityList,quoteCurrency:this.quoteCurrency}})],1)])])])},staticRenderFns:[]};var Me=n("VU/8")(ze,Ae,!1,function(t){n("WrYq")},null,null).exports;A.default.use(jt.a);var We=new jt.a({routes:[{path:"/",name:"Home",component:de,meta:{keepAlive:!0}},{path:"/charts",name:"Charts",component:de,meta:{keepAlive:!0}},{path:"/depth",name:"Depth",component:ve},{path:"/difference",name:"Difference",component:ge,meta:{keepAlive:!0}},{path:"/trade",name:"Trade",component:Oe,meta:{keepAlive:!0}},{path:"/density",name:"Density",component:Me,meta:{keepAlive:!0}}]});n("991W"),n("erWL"),n("758U");A.default.config.productionTip=!1,A.default.use(z.a),A.default.use(E.a),A.default.use(V.a),A.default.use(O.a),A.default.use(L.a),A.default.use(j.a),A.default.use(x.a),A.default.use(S.a),A.default.use(g.a),A.default.use(y.a),A.default.use(b.a),A.default.use(f.a),A.default.use(h.a),A.default.use(l.a),A.default.use(u.a),A.default.use(i.a.directive),A.default.prototype.$loading=i.a.service,A.default.prototype.$notify=a.a,new A.default({el:"#app",router:We,store:dt,components:{App:wt},template:"<App/>"})},Q6SQ:function(t,e){},SHjb:function(t,e){},WOq4:function(t,e){},WrYq:function(t,e){},"X+ky":function(t,e){},Yq4J:function(t,e){},bwiK:function(t,e){},cDSy:function(t,e){},d7TW:function(t,e){},erWL:function(t,e){},fhLv:function(t,e){},isE6:function(t,e){},jZDA:function(t,e){},mSyf:function(t,e){},mqrp:function(t,e){},n8ix:function(t,e){t.exports=function(t){if(!t)throw Error("param error");var e=[];void 0!==localStorage.symbols&&(e=JSON.parse(localStorage.symbols));var n={"price-precision":4,"amount-precision":4};return e.some(function(e){return!(!t.startsWith(e["base-currency"])||!t.endsWith(e["quote-currency"])||(n["price-precision"]=e["price-precision"],n["amount-precision"]=e["amount-precision"],n["base-currency"]=e["base-currency"],n["quote-currency"]=e["quote-currency"],0))}),n}},qbW9:function(t,e){},rmjc:function(t,e){},shHP:function(t,e){},uslO:function(t,e,n){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function a(t){return n(r(t))}function r(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(s)},a.resolve=r,t.exports=a,a.id="uslO"}},["NHnr"]);