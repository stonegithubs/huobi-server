webpackJsonp([9],{"+BTi":function(t,e){},"/I4U":function(t,e){},"/bpg":function(t,e){},"2rGO":function(t,e){},"758U":function(t,e){},"78Ua":function(t,e){},"7RZ3":function(t,e){},"8z31":function(t,e){},"991W":function(t,e){},CzGJ:function(t,e){},DSCY:function(t,e){},Dte2:function(t,e){},GXEp:function(t,e){},I4nB:function(t,e){},IxJZ:function(t,e){},LXjw:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("/I4U"),n("+BTi");var r=n("yg6k"),s=n.n(r),a=(n("2rGO"),n("nu7/")),i=n.n(a),o=(n("cDSy"),n("e0Bm")),u=n.n(o),c=(n("d7TW"),n("ajQY")),l=n.n(c),d=(n("8z31"),n("SXzR")),h=n.n(d),p=(n("I4nB"),n("STLj")),f=n.n(p),m=(n("/bpg"),n("ACGT")),v=n.n(m),b=(n("bwiK"),n("SExR")),y=n.n(b),_=(n("Dte2"),n("q4le")),g=n.n(_),k=(n("isE6"),n("LR6y")),x=n.n(k),w=(n("DSCY"),n("LaeV")),C=n.n(w),S=(n("IxJZ"),n("NoPp")),j=n.n(S),D=(n("X+ky"),n("HJMx")),L=n.n(D),F=(n("Yq4J"),n("qubY")),O=n.n(F),T=(n("Q6SQ"),n("LQMI")),V=n.n(T),P=(n("jZDA"),n("91Nw")),q=n.n(P),E=(n("GXEp"),n("mtrD")),z=n.n(E),M=n("7+uW"),A=n("mvHQ"),B=n.n(A),N=n("Xxa5"),R=n.n(N),U=n("exGp"),H=n.n(U),W=n("mw3O"),$=n.n(W),I=n("mtWM"),K=n.n(I),X={hosts:{api:"http://182.61.43.233:3000",api_huobi:"https://api.huobi.br.com",huobi_ws:"localhost:3000"},isMobile:!!/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent),isDev:!1,prices:{btc:6500,etch:200}};window.appConfig=X;var G,J,Q,Y,Z,tt,et,nt,rt,st,at=X,it=K.a.create({baseURL:at.hosts.api,timeout:3e4,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){return"application/x-www-form-urlencoded"===e["Content-Type"]&&"[object Object]"===Object.prototype.toString(t)?$.a.stringify(t):t}]}),ot=(G=H()(R.a.mark(function t(e,n,r){var s,a;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=at.hosts.api+"/api/huobi/v1/get_kline?"+$.a.stringify({symbol:e,period:n,size:r}),t.prev=1,t.next=4,it.get(s);case 4:if(200!==(a=t.sent).status&&"ok"!==a.data.status){t.next=7;break}return t.abrupt("return",a.data);case 7:throw{tip:"error",response:a,data:{},url:s};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),function(t,e,n){return G.apply(this,arguments)}),ut=(J=H()(R.a.mark(function t(e,n){var r,s;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=at.hosts.api+"/api/huobi/v1/market/depth?"+$.a.stringify({symbol:e,type:n,AccessKeyId:"2f0f54a2-8e5d9137-982b01e1-5789d"}),t.prev=2,t.next=5,it.get(r);case 5:if(200!==(s=t.sent).status||"ok"!==s.data.status){t.next=8;break}return t.abrupt("return",s.data.data);case 8:throw{tip:"error",response:s,data:{},url:r};case 12:throw t.prev=12,t.t0=t.catch(2),t.t0;case 15:case"end":return t.stop()}},t,this,[[2,12]])})),function(t,e){return J.apply(this,arguments)}),ct=(Q=H()(R.a.mark(function t(e){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=at.hosts.api_huobi+"/market/detail/merged?"+$.a.stringify({symbol:e}),t.prev=1,t.next=4,it.get(n);case 4:if(200!==(r=t.sent).status){t.next=7;break}return t.abrupt("return",r.data);case 7:throw{tip:"error",response:r,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),Y=H()(R.a.mark(function t(){var e,n;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=at.hosts.api_huobi+"/v1/common/symbols",void 0===localStorage.symbols){t.next=3;break}return t.abrupt("return",JSON.parse(localStorage.symbols));case 3:return t.prev=3,t.next=6,it.get(e);case 6:if(200!==(n=t.sent).status||"ok"!==n.data.status){t.next=10;break}return localStorage.symbols=B()(n.data.data),t.abrupt("return",n.data.data);case 10:throw{tip:"error",response:n,data:{},url:e};case 14:throw t.prev=14,t.t0=t.catch(3),t.t0;case 17:case"end":return t.stop()}},t,this,[[3,14]])})),function(){return Y.apply(this,arguments)}),lt=(Z=H()(R.a.mark(function t(e,n){var r,s,a;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct();case 2:return r=t.sent,s=0,a=0,r.some(function(t){return t["base-currency"]===e&&t["quote-currency"]===n&&(s=t["price-precision"],a=t["amount-precision"],!0)}),t.abrupt("return",{pricePrecision:s,amountPrecision:a});case 7:case"end":return t.stop()}},t,this)})),tt=H()(R.a.mark(function t(e){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=at.hosts.api+"/api/huobi/v1/limit",t.prev=1,t.next=4,it.post(n,e);case 4:if(200!==(r=t.sent).status||"ok"!==r.data.status){t.next=7;break}return t.abrupt("return",r.data);case 7:throw{tip:"error",response:r,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),function(t){return tt.apply(this,arguments)}),dt=(et=H()(R.a.mark(function t(e){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=at.hosts.api+"/api/huobi/v1/cancelOrder",t.prev=1,t.next=4,it.post(n,{orderId:e});case 4:if(200!==(r=t.sent).status||"ok"!==r.data.status){t.next=7;break}return t.abrupt("return",r.data);case 7:throw{tip:"error",response:r,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),function(t){return et.apply(this,arguments)}),ht=(nt=H()(R.a.mark(function t(e){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=at.hosts.api+"/api/huobi/v1/openOrders?"+$.a.stringify(e),t.prev=2,t.next=5,it.get(n);case 5:if(200!==(r=t.sent).status||"ok"!==r.data.status){t.next=8;break}return t.abrupt("return",r.data);case 8:throw{tip:"error",response:r,data:{},url:n};case 12:throw t.prev=12,t.t0=t.catch(2),t.t0;case 15:case"end":return t.stop()}},t,this,[[2,12]])})),function(t){return nt.apply(this,arguments)}),pt=(rt=H()(R.a.mark(function t(){var e,n;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=at.hosts.api+"/api/huobi/v1/get_balance",t.prev=1,t.next=4,it.get(e);case 4:if(200!==(n=t.sent).status||"ok"!==n.data.status){t.next=7;break}return t.abrupt("return",n.data.data);case 7:throw{tip:"error",response:n,data:{},url:e};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),function(){return rt.apply(this,arguments)}),ft=(st=H()(R.a.mark(function t(e){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=at.hosts.api+"/api/huobi/v1/get_order?orderId="+e,t.prev=1,t.next=4,it.get(n);case 4:if(200!==(r=t.sent).status||"ok"!==r.data.status){t.next=7;break}return t.abrupt("return",r.data);case 7:throw{tip:"error",response:r,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])})),n("//Fk")),mt=n.n(ft),vt=n("woOf"),bt=n.n(vt),yt=n("NYxO"),_t=n("bOdI"),gt={state:{tick:{asks:[],bids:[]},trade:{},asksList:[],bidsList:[],aksFirst:[],bidsFirst:[],responseSymbol:"",lastKline:{},WS_HUOBI_STATUS:{},WS_SERVER_STATUS:{}},getters:{useWSAble:function(t){return"ok"===t.WS_HUOBI_STATUS.status&&"ok"===t.WS_SERVER_STATUS.status}},actions:{},mutations:n.n(_t)()({updateHuobiState:function(t,e){var n=!1,r="store > huobi > state";if("string"!=typeof e.stateKey||""===e.stateKey.trim())throw Error("stateKey must be a String inclusion in the  "+r);for(var s in t)if(s===e.stateKey){n=!0;break}if(!n)throw Error(e.stateKey+"不存在"+r+"中");t[e.stateKey]=e.data}},"UPTATE_DEPTH",function(t,e){t.tick=e.tick,t.asksList=e.asksList,t.bidsList=e.bidsList,t.aksFirst=e.aksFirst,t.bidsFirst=e.bidsFirst,t.responseSymbol=e.responseSymbol})};M.default.use(yt.a);var kt=new yt.a.Store({modules:{huobi:gt},strict:!1}),xt=n("n8ix"),wt={sortBy:"sumMoneny",minSumPrice:200,minPrice:1e3};var Ct=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,r=void 0===n?"":n,s=e.symbol,a=void 0===s?"":s,i=e.sortBy,o=void 0===i?wt.sortBy:i,u={},c=xt(a),l=c["amount-precision"],d=c["price-precision"],h=0;h<t.length;h++){var p=t[h][1];void 0!==u[p]?(u[p].count+=1,u[p].prices.push(t[h][0])):(u[p]={},u[p].count=1,u[p].prices=[t[h][0]])}var f=[];for(var m in u){var v=u[m].prices,b=0;b=1===v.length?u[m].prices[0]:v.reduce(function(t,e){return t+e})/v.length;var y=u[m].count,_=y*m,g=_*b,k=g;if(a.endsWith("btc")?k=g*appConfig.prices.btc:a.endsWith("eth")&&(k=g*appConfig.prices.eth),y>1&&k>wt.minSumPrice||k>wt.minPrice){var x={count:y,amount:Number(m).toFixed(l),sumCount:_.toFixed(l),sumMoneny:g.toFixed(2),sumDollar:k.toFixed(2),price:b.toFixed(d),prices:u[m].prices};f.push(x)}}return"asks"===r&&"price"===o?f.sort(function(t,e){return t[o]-e[o]}):f.sort(function(t,e){return e[o]-t[o]})};Ct.setConfig=function(t){bt()(wt,t)};var St=Ct,jt=function(t){var e={usdt:1,btc:appConfig.prices.btc,eth:appConfig.prices.eth},n=void 0;for(var r in e)if(t.endsWith(r)){n=e[r];break}return n},Dt=null,Lt={symbol:"btcusdt",set:function(t){bt()(at,t)}},Ft=function(t){(Dt=new WebSocket("ws://"+appConfig.hosts.huobi_ws+"/huobi")).onmessage=Ot,Dt.onclose=Tt,Dt.onerror=Vt};Ft();function Ot(t){var e=JSON.parse(t.data);Date.now();if("WS_HUOBI"===e.form)if(console.log(e),"depth"===e.type&&e.symbol===Lt.symbol){var n=e.data,r=n.bids1,s=n.bidsList,a=n.aks1,i=n.asksList;kt.commit("UPTATE_DEPTH",{asksList:i,bidsList:s,bidsFirst:r,aksFirst:a,responseSymbol:e.symbol,tick:n.tick})}else e.kline&&e.symbol===Lt.symbol?kt.commit("updateHuobiState",{stateKey:"lastKline",data:e.kline}):e.trade&&e.symbol===Lt.symbol&&kt.commit("updateHuobiState",{stateKey:"trade",data:e.trade});e.status&&kt.commit("updateHuobiState",{stateKey:"WS_HUOBI_STATUS",data:{type:e.type,status:e.status,msg:e.msg}})}function Tt(){console.log("ws.close"),kt.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"error",msg:"close"}})}function Vt(t){console.error(t),kt.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"error",msg:t}})}var Pt=Dt,qt={name:"App",components:{},data:function(){return{activeIndex:"charts"}},created:function(){var t=this.$router.history.current.name;this.activeIndex=t||this.activeIndex,appConfig.prices.eth=466,appConfig.prices.btc=8e3},mounted:function(){this.resize(),window.addEventListener("resize",this.resize),ot("ethusdt","1min",2).then(function(t){appConfig.prices.eth=t.data[1].close}),ot("btcusdt","1min",2).then(function(t){appConfig.prices.btc=t.data[1].close}),ct().then(function(){Ft()})},beforeDestroy:function(){window.removeEventListener("resize",this.resize),this.$notify({title:"WS状态",message:"msg: ws_server closed",duration:3e3}),Pt.close()},methods:{handleClick:function(t,e){},handleSelect:function(){},resize:function(){var t=this.$refs.menu.$el.clientHeight;this.$refs.routerPage.style.maxHeight=window.innerHeight-t+"px"}}},Et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-menu",{ref:"menu",staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"charts"}},[t._v("Charts")]),t._v(" "),n("el-menu-item",{attrs:{index:"depth"}},[t._v("Depth")]),t._v(" "),n("el-menu-item",{attrs:{index:"difference"}},[t._v("Difference")]),t._v(" "),n("el-menu-item",{attrs:{index:"density"}},[t._v("Density")]),t._v(" "),n("el-menu-item",{attrs:{index:"trade"}},[t._v("Trade")])],1),t._v(" "),n("div",{ref:"routerPage",staticClass:"page-content"},[n("keep-alive",[n("router-view")],1)],1)],1)},staticRenderFns:[]};var zt=n("VU/8")(qt,Et,!1,function(t){n("qu7u"),n("y4IO")},null,null).exports,Mt=n("/ocq"),At=n("Dd8w"),Bt=n.n(At),Nt=function(){var t=H()(R.a.mark(function t(e){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=at.hosts.api+"/api/chart/amount?"+$.a.stringify({symbol:e}),t.prev=1,t.next=4,it.get(n);case 4:if(200!==(r=t.sent).status){t.next=7;break}return t.abrupt("return",r.data);case 7:throw{tip:"error",response:r,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}(),Rt=function(){var t=H()(R.a.mark(function t(e){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=at.hosts.api+"/api/chart/trade?"+$.a.stringify({symbol:e}),t.prev=1,t.next=4,it.get(n);case 4:if(200!==(r=t.sent).status){t.next=7;break}return t.abrupt("return",r.data);case 7:throw{tip:"error",response:r,data:{},url:n};case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}(),Ut=null,Ht=null,Wt=null,$t=null,It=null,Kt=function(){var t=H()(R.a.mark(function t(){return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"LqmE")).then(function(t){Wt=(Ht=t).Chart,Ht.track(!1)});case 2:return t.next=4,mt.a.all([Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"H4Ae")),Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"2gyv")),Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"kXdy")).then(function(t){Ht.Chart.plugins.register(t)})]);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),Xt=function(){var t=H()(R.a.mark(function t(){return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(4).then(n.bind(null,"b7ct")).then(function(t){Wt=(Ut=t).Chart,Ut.track(!1)});case 2:return t.next=4,mt.a.all([n.e(5).then(n.bind(null,"F21L")).then(function(t){$t=t})]);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),Gt=function(){var t=H()(R.a.mark(function t(){var e;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=[]).push(n.e(7).then(n.bind(null,"ifQC")).then(function(t){It=t})),at.isMobile?e.push(Kt()):e.push(Xt()),t.next=5,mt.a.all(e);case 5:return t.abrupt("return",{Chart:Wt,F2:Ht,G2:Ut,Slider:$t,DataSet:It});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();function Jt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dataSetConfig,n=t.transformConfig;if(!e.state)throw Error("dataSetConfig.sate must be a Object");var r=new It(e),s=r.createView();return s.source(r.state.sourceData),Array.isArray(n)&&(n.forEach(function(t){s.transform(t)}),void 0!==e.state.start&&void 0!==e.state.end&&s.transform({type:"filter",callback:function(t){var e=new Date(t.time).getTime();return e>=r.state.start&&e<=r.state.end}})),{dataSet:r,dataView:s}}function Qt(t,e,n){var r=new $t({container:n,width:"auto",height:26,padding:at.isMobile?[0,10,0,50]:[0,100,0,120],start:t.state.start,end:t.state.end,xAxis:"time",yAxis:"value",scales:{time:{type:"time",tickCount:100,mask:"M/DD H:mm:ss"}},data:e,backgroundChart:{type:"line"},onChange:function(e){var n=e.startValue,r=e.endValue;t.setState("start",n),t.setState("end",r)}});return r.render(),r}var Yt={bids_max_1:"#006633",asks_max_1:"#990000",buy_1:"#03C087",sell_1:"#EF5555"},Zt=[Yt.buy_1,Yt.sell_1],te=function(t){return t/1e4+"万usdt ("+parseInt(t/appConfig.prices.btc)+"฿)"},ee={name:"DepthLineChart",components:{},data:function(){return{}},props:{data:Array},mounted:function(){var t=this;Gt().then(function(e){var n=function(t,e,n){var r=Jt({dataSetConfig:{state:{sourceData:e,start:Date.now()-864e5,end:Date.now()}},transformConfig:[{type:"fold",fields:["bids_max_1","asks_max_1","buy_1","sell_1"],key:"type",value:"value",retains:["time","price"]}]}),s=r.dataSet,a=r.dataView,i=new t({container:n,height:500,forceFit:!0,padding:at.isMobile?[50,10,50,40]:[50,50,80,120]});return i.source(a,{time:{type:"time",nice:!1,mask:"M/DD H:mm:ss",tickCount:12}}),i.axis("value",{label:{formatter:te}}),i.tooltip({crosshairs:{type:"line"}}),i.line({sortable:!1}).position("time*value").color("type",function(t){return Yt[t]}),i.legend({position:"top-right"}),i.render(),{chart:i,dataSet:s,dataView:a}}(e.Chart,[],t.$refs.container),r=n.dataSet,s=n.dataView,a=n.chart;t.dataSet=r,t.dataView=s,t.chart=a,t.slider=Qt(r,s,t.$refs.slider)}).then(function(){t.getData()})},methods:{getData:function(){var t=this;Nt("btcusdt").then(function(e){var n=e.data;if(t.chart){var r=new Date(n[parseInt(n.length/3)].time).getTime(),s=new Date(n[n.length-1].time).getTime();t.dataSet.setState("sourceData",n),t.dataView.source(t.dataSet.state.sourceData),t.slider.start=r,t.slider.end=s,t.slider.changeData(t.dataView.rows),t.dataSet.setState("start",r),t.dataSet.setState("end",s),console.log(t.slider)}}).finally(function(){t.$emit("onloaded")})}}};var ne={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"container"}),this._v(" "),e("div",{ref:"slider",staticClass:"chart-slider"})])},staticRenderFns:[]};var re=n("VU/8")(ee,ne,!1,function(t){n("z+B7")},null,null).exports,se={name:"DepthLineChart",data:function(){return{}},props:{data:Array},mounted:function(){var t=this;Gt().then(function(e){var n=function(t,e,n){var r=Jt({dataSetConfig:{state:{sourceData:e}},transformConfig:[{type:"fold",fields:["bids_max_1","asks_max_1","buy_1","sell_1"],key:"type",value:"value",retains:["time","price"]}]}),s=r.dataSet,a=r.dataView,i=new t({el:n,pixelRatio:window.devicePixelRatio,padding:[14,"auto","auto"],height:400,width:n.parentNode.clientWidth,animate:!1});return i.source(a.rows,{time:{type:"timeCat",nice:!1,range:[0,1],mask:"M/DD H:mm:ss",tickInterval:6e4},type:{values:["bids_max_1","asks_max_1","buy_1","sell_1"]}}),i.axis("value",{label:function(t){return{text:te(t)}}}),i.legend(!1),i.tooltip(!1),i.line({sortable:!1}).position("time*value").color("type",function(t){return Yt[t]}).animate({appear:{duration:500},update:{animation:"lineUpdate",duration:500}}),i.scrollBar({mode:"x",xStyle:{offsetY:-5}}),i.interaction("pinch",{minScale:1,maxScale:6}).interaction("pan"),i.render(),{chart:i,dataSet:s,dataView:a}}(e.Chart,[],t.$refs.canvas),r=n.dataSet,s=n.dataView,a=n.chart;t.dataSet=r,t.dataView=s,t.chart=a}).then(function(){t.getData()})},methods:{getData:function(){var t=this;Nt("btcusdt").then(function(e){var n=e.data;t.chart&&(t.dataSet.setState("sourceData",n),t.dataView.source(t.dataSet.state.sourceData),t.chart.changeData(t.dataView.rows))}).finally(function(){t.$emit("onloaded")})}}};var ae={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas"})},staticRenderFns:[]};var ie={name:"DepthLineChartWrap",components:{DepthLineChart:re,DepthLineChart_M:n("VU/8")(se,ae,!1,function(t){n("LXjw")},null,null).exports},data:function(){return{loading:!0}},computed:{currentComponent:function(){return appConfig.isMobile?"DepthLineChart_M":"DepthLineChart"}},methods:{onloaded:function(){this.loading=!1}}},oe={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"charts-container"},[e(this.currentComponent,{tag:"component",on:{onloaded:this.onloaded}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("h3",[this._v("挂单资金")])])}]},ue=n("VU/8")(ie,oe,!1,null,null,null).exports,ce={name:"LineCharts",data:function(){return{}},props:{data:{type:Array,default:function(){return[]}}},watch:{data:function(t){this.chart&&this.renderChart(t)}},mounted:function(){var t=this;Gt().then(function(e){var n=function(t,e,n){var r=Jt({dataSetConfig:{state:{sourceData:e}},transformConfig:[{type:"aggregate",fields:["buy","sell"],operations:["sum","sum"],as:["流入","流出"]},{type:"fold",fields:["流入","流出"],key:"type",value:"sum"},{type:"percent",field:"sum",dimension:"type",as:"percent"}]}),s=r.dataSet,a=r.dataView,i=new t({container:n,height:220,width:220,forceFit:!0});return i.source(a,{sum:{formatter:function(t){return parseInt(t/1e4)+"万"}}}),i.coord("theta"),i.tooltip({showTitle:!1}),i.intervalStack().position("percent").color("type",Zt).label("sum",{offset:-30,textStyle:{rotate:0,textAlign:"center",shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}}).tooltip("type*sum",function(t,e){return{name:t,value:e=parseInt(e/1e4)+"万$"}}).style({lineWidth:1,stroke:"#fff"}),i.legend(!1),i.render(),{chart:i,dataSet:s,dataView:a}}(e.G2.Chart,[],t.$refs.container),r=n.dataSet,s=n.dataView,a=n.chart;t.dataSet=r,t.dataView=s,t.chart=a}).then(function(){t.renderChart(t.data)})},methods:{renderChart:function(t){if(this.chart)return this.dataSet.setState("sourceData",t),void this.dataView.source(this.dataSet.state.sourceData)}}};var le={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-pai-chart"},[e("div",{ref:"container"})])},staticRenderFns:[]};var de={name:"TradeBarChart",components:{TradePieChart:n("VU/8")(ce,le,!1,function(t){n("78Ua"),n("7RZ3")},"data-v-409838e2",null).exports},data:function(){return{loading:!0,data:[]}},props:{},mounted:function(){var t=this;Gt().then(function(e){var n=function(t,e,n){var r=Jt({dataSetConfig:{state:{sourceData:e,start:Date.now()-864e5,end:Date.now()}},transformConfig:[{type:"fold",fields:["buy","sell"],key:"type",value:"value",retains:["time"]}]}),s=r.dataSet,a=r.dataView,i=new t({container:n,height:500,forceFit:!0,padding:at.isMobile?[10,10,20,40]:[50,50,80,120]});return i.source(a,{time:{type:"time",nice:!1,mask:"M/DD H:mm:ss",tickCount:12}}),i.axis("value",{label:{formatter:te}}),i.tooltip({crosshairs:{type:"line"}}),i.intervalStack().position("time*value").color("type",Zt),i.legend({position:"top-right",offsetY:at.isMobile?0:-20}),i.render(),{chart:i,dataSet:s,dataView:a}}(e.G2.Chart,[],t.$refs.container),r=n.dataSet,s=n.dataView,a=n.chart;t.dataSet=r,t.dataView=s,t.chart=a,t.slider=Qt(r,s,t.$refs.slider)}).then(function(){t.getData()})},methods:{getData:function(){var t=this;Rt("btcusdt").then(function(e){var n=t.data=e.data;if(t.chart){var r=new Date(n[parseInt(n.length/1.5)].time).getTime(),s=new Date(n[n.length-1].time).getTime();t.dataSet.setState("sourceData",n),t.dataView.source(t.dataSet.state.sourceData),t.slider.start=r,t.slider.end=s,t.slider.changeData(t.dataView.rows),t.dataSet.setState("start",r),t.dataSet.setState("end",s)}}).finally(function(){t.$emit("onloaded")})}}};var he={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-chart"},[e("div",{ref:"container"}),this._v(" "),e("div",{ref:"slider",staticClass:"chart-slider"}),this._v(" "),e("TradePieChart",{attrs:{data:this.data}})],1)},staticRenderFns:[]};var pe={name:"TradeBarChart_M",data:function(){return{}},props:{},mounted:function(){var t=this;Gt().then(function(e){var n=function(t,e,n){var r=Jt({dataSetConfig:{state:{sourceData:e}},transformConfig:[{type:"fold",fields:["buy","sell"],key:"type",value:"value",retains:["time"]}]}),s=r.dataSet,a=r.dataView,i=new t({el:n,pixelRatio:window.devicePixelRatio,padding:[14,"auto","auto"],height:400,width:n.parentNode.clientWidth});return i.source(a,{time:{type:"timeCat",nice:!1,range:[0,1],mask:"M/DD H:mm:ss",tickCount:5}}),i.axis("value",{label:function(t){return{text:te(t)}}}),i.tooltip(!1),i.legend(!1),i.interval().position("time*value").color("type",Zt).adjust("stack"),i.scrollBar({mode:"x",xStyle:{offsetY:-5}}),i.render(),i.interaction("pinch",{minScale:0,maxScale:6,onProcess:function(t){console.log(t)}}).interaction("pan"),{chart:i,dataSet:s,dataView:a}}(e.Chart,[],t.$refs.canvas),r=n.dataSet,s=n.dataView,a=n.chart;t.dataSet=r,t.dataView=s,t.chart=a}).then(function(){t.getData()})},methods:{getData:function(){var t=this;Rt("btcusdt").then(function(e){var n=e.data;t.chart&&(t.dataSet.setState("sourceData",n),t.dataView.source(t.dataSet.state.sourceData),t.chart.changeData(t.dataView.rows))}).finally(function(){t.$emit("onloaded")})}}};var fe={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas"})},staticRenderFns:[]};var me={name:"TradeBarChartWrap",components:{TradeBarChart:n("VU/8")(de,he,!1,function(t){n("T9RM")},null,null).exports,TradeBarChart_M:n("VU/8")(pe,fe,!1,function(t){n("CzGJ")},null,null).exports},data:function(){return{loading:!0}},computed:{currentComponent:function(){return appConfig.isMobile?"TradeBarChart_M":"TradeBarChart"}},methods:{onloaded:function(){this.loading=!1}}},ve={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"charts-container"},[e(this.currentComponent,{tag:"component",on:{onloaded:this.onloaded}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("h3",[this._v("资金流入流出")])])}]},be={name:"Charts",components:{DepthLineChart:ue,TradeBarChart:n("VU/8")(me,ve,!1,null,null,null).exports},data:function(){return{}},computed:Bt()({},Object(yt.c)({bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol},trade:function(t){return t.huobi.trade}})),created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{}},ye={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-page"},[n("el-card",{staticClass:"chart-wrap"},[n("DepthLineChart",{attrs:{asksList:t.asksList,bidsList:t.bidsList,aksFirst:t.aksFirst,bidsFirst:t.bidsFirst,symbol:t.responseSymbol}})],1),t._v(" "),n("el-card",{staticClass:"chart-wrap"},[n("TradeBarChart",{attrs:{trade:t.trade,symbol:t.responseSymbol}})],1)],1)},staticRenderFns:[]};var _e=n("VU/8")(be,ye,!1,function(t){n("RlG0")},null,null).exports,ge={name:"DepthTable",data:function(){return{itemPrices:[],dialogVisible:!1}},props:{data:{type:Array,default:function(){return[]}},quoteCurrency:String},mounted:function(){},methods:{showAllPrices:function(t){this.dialogVisible=!0,this.itemPrices=t}}},ke={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"depth-table-wrap"},[n("table",[n("thead",[n("tr",[n("th",[t._v("\n              count\n              ")]),t._v(" "),n("th",[t._v("\n              amount\n              ")]),t._v(" "),n("th",[t._v("\n              sumCount\n              ")]),t._v(" "),n("th",[t._v("\n              sum("+t._s(t.quoteCurrency)+")\n              ")]),t._v(" "),n("th",[t._v("\n              $($/k)\n              ")]),t._v(" "),n("th",[t._v("\n              price("+t._s(t.quoteCurrency)+")\n              ")])])]),t._v(" "),n("tbody",t._l(t.data,function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(e.count))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[t._v(t._s(e.sumCount))]),t._v(" "),n("td",[t._v(t._s(e.sumMoneny))]),t._v(" "),n("td",[t._v(t._s((e.sumDollar/1e3).toFixed(3)))]),t._v(" "),n("td",[n("span",[t._v(t._s(e.price))]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(n){t.showAllPrices(e.prices)}}},[t._v("\n                  查看全部\n              ")])],1)])}))]),t._v(" "),n("el-dialog",{attrs:{title:"全部价格",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("ul",{staticClass:"all-price-list"},t._l(t.itemPrices,function(e){return n("li",{key:e},[t._v(t._s(e))])})),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var xe={name:"Depth",components:{DepthTable:n("VU/8")(ge,ke,!1,function(t){n("cHPH")},null,null).exports},data:function(){return{quoteCurrency:"usdt",symbol:"btc",symbol2:"usdt",symbols:"",sortByValue:"sumMoneny",subscribeLoading:!1,subscribeDisable:!1,tabVal:"bids",isMobile:appConfig.isMobile}},computed:Bt()({},Object(yt.c)({status:function(t){return t.huobi.WS_HUOBI_STATUS},bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol}}),Object(yt.b)(["useWSAble"])),watch:{bidsList:function(t){},status:function(t){this.$notify({title:"WS状态",message:"msg: "+B()(t.msg),duration:3e3})},useWSAble:function(t){}},created:function(){var t=this;Pt.onopen=function(){t.$notify({title:"WS状态",message:"msg: ws_server open",duration:3e3}),t.$store.commit("updateHuobiState",{stateKey:"WS_SERVER_STATUS",data:{status:"ok",msg:"open"}})}},mounted:function(){console.log(1)},beforeDestroy:function(){},methods:{reset:function(){var t;t={type:"ws-huobi",value:"reset"},Dt.send(B()(t))},handleClick:function(){},subscribeDepth:function(){var t=H()(R.a.mark(function t(){var e;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.subscribeLoading=!0,e=this.symbol+this.symbol2,this.symbols=e,this.quoteCurrency="$","eth"===this.symbol2?this.quoteCurrency="ETH":"btc"===this.symbol2&&(this.quoteCurrency="BTC"),Lt.set({symbol:this.symbols}),this.$store.commit("UPTATE_DEPTH",{tick:{asks:[],bids:[]},asksList:[],bidsList:[],bidsFirst:[],aksFirst:[],responseSymbol:""}),this.subscribeLoading=!1;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),sortBy:function(){}}},we={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"depth-page"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{xs:12,sm:3,md:3,lg:3,xl:1}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入内容",size:"small",clearable:"",disabled:!0},model:{value:t.symbol,callback:function(e){t.symbol=e},expression:"symbol"}})],1),t._v(" "),n("el-col",{attrs:{xs:12,sm:3,md:3,lg:3,xl:1}},[n("el-select",{attrs:{placeholder:"请选择",size:"small",disabled:!0},model:{value:t.symbol2,callback:function(e){t.symbol2=e},expression:"symbol2"}},[n("el-option",{attrs:{value:"usdt"}},[t._v("usdt")]),t._v(" "),n("el-option",{attrs:{value:"btc"}},[t._v("btc")]),t._v(" "),n("el-option",{attrs:{value:"eth"}},[t._v("eth")])],1)],1),t._v(" "),n("el-col",{attrs:{xs:12,sm:3,md:8,lg:3,xl:1}},[n("el-button",{attrs:{type:"primary",loading:t.subscribeLoading,disabled:t.subscribeDisable,size:"small"},on:{click:t.subscribeDepth}},[t._v("查挂单\n      ")])],1),t._v(" "),n("el-col",{attrs:{xs:12,sm:3,md:3,lg:3,xl:1}},[n("el-select",{attrs:{placeholder:"请选择",size:"small",disabled:!0},on:{change:t.sortBy},model:{value:t.sortByValue,callback:function(e){t.sortByValue=e},expression:"sortByValue"}},[n("el-option",{attrs:{value:"sumMoneny"}},[t._v("按sumMoneny排序")]),t._v(" "),n("el-option",{attrs:{value:"price"}},[t._v("按price排序")])],1)],1)],1),t._v(" "),n("div",[n("span",[t._v("当前价"+t._s(t.lastKline.close))])]),t._v(" "),t.isMobile?t._e():n("div",{staticClass:"depth-table-wap"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("span",[t._v("买单("+t._s(t.bidsList.length)+")")]),t._v(" "),n("span",[t._v("买1:"+t._s(t.bidsFirst))]),t._v(" "),n("DepthTable",{attrs:{data:t.bidsList,quoteCurrency:t.quoteCurrency}})],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("span",[t._v("卖单("+t._s(t.asksList.length)+")")]),t._v(" "),n("span",[t._v("卖1:"+t._s(t.aksFirst))]),t._v(" "),n("DepthTable",{attrs:{data:t.asksList,quoteCurrency:t.quoteCurrency}})],1)],1)],1),t._v(" "),t.isMobile?n("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.tabVal,callback:function(e){t.tabVal=e},expression:"tabVal"}},[n("el-tab-pane",{attrs:{label:"买挂单",name:"bids"}},[n("span",[t._v("买单("+t._s(t.bidsList.length)+")")]),t._v(" "),n("span",[t._v("买1:"+t._s(t.bidsFirst))]),t._v(" "),n("DepthTable",{attrs:{data:t.bidsList,quoteCurrency:t.quoteCurrency}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"卖挂单",name:"asks"}},[n("span",[t._v("卖单("+t._s(t.asksList.length)+")")]),t._v(" "),n("span",[t._v("卖1:"+t._s(t.aksFirst))]),t._v(" "),n("DepthTable",{attrs:{data:t.asksList,quoteCurrency:t.quoteCurrency}})],1)],1):t._e()],1)},staticRenderFns:[]};var Ce=n("VU/8")(xe,we,!1,function(t){n("ecsj")},null,null).exports,Se={name:"Difference",components:{},data:function(){return{list:[],isLoading:!1,orderByProperty:"tickDis"}},created:function(){},mounted:function(){this.seachAble=!0},beforeDestroy:function(){},methods:{start:function(){this.getAllDetail()},getAllDetail:function(){var t=H()(R.a.mark(function t(){var e,n,r,s,a,i,o,u,c,l,d,h,p,f,m,v,b,y,_=this;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0===this.list.length?this.list:[],this.isLoading=!0,t.next=4,ct();case 4:n=t.sent,r=n.filter(function(t){return"usdt"===t["quote-currency"]||"btc"===t["quote-currency"]}),s=0;case 7:if(!(s<r.length)){t.next=42;break}return a=r[s],void 0,void 0,i=a["base-currency"]+a["quote-currency"],o=void 0,t.prev=12,t.next=15,ut(i,"step0");case 15:o=t.sent,t.next=23;break;case 18:return t.prev=18,t.t0=t.catch(12),this.isLoading=!1,console.error(t.t0),t.abrupt("continue",39);case 23:if(u=o.tick.bids,c=o.tick.asks,l=St(u,{pricePrecision:a["price-precision"],amountPrecision:a["amount-precision"],quoteCurrency:a["quote-currency"],type:"bids"}),d=St(c,{pricePrecision:a["price-precision"],amountPrecision:a["amount-precision"],quoteCurrency:a["quote-currency"],type:"asks"}),h=1,p=1,l.length&&d.length){t.next=31;break}return t.abrupt("continue",39);case 31:l.length>1?h=(Number(l[0].sumMoneny)+Number(l[1].sumMoneny))/2:1===l.length&&(h=Number(l[0].sumMoneny)),d.length>1?p=(Number(d[0].sumMoneny)+Number(d[1].sumMoneny))/2:1===d.length&&(p=Number(d[0].sumMoneny)),f=h/p,m=l[0].sumDollar,v=d[0].sumDollar,b=l.sort(function(t,e){return e.count-t.count}),y=d.sort(function(t,e){return e.count-t.count}),e.push({symbol:i,tickDis:f.toFixed(3),maxCountDis:(b[0].count/y[0].count).toFixed(3),lengthDis:(l.length/d.length).toFixed(3),buy1Money:m,sell1Money:v});case 39:s++,t.next=7;break;case 42:if(e!==this.list&&(this.list.length=0,this.list=e),this.isLoading=!1,this.orderBy(),this.seachAble){t.next=47;break}return t.abrupt("return");case 47:setTimeout(function(){_.start()},2e3);case 48:case"end":return t.stop()}},t,this,[[12,18]])}));return function(){return t.apply(this,arguments)}}(),orderBy:function(){var t=this;this.list.sort(function(e,n){return n[t.orderByProperty]-e[t.orderByProperty]})},stopSearch:function(){this.seachAble=!1}}},je={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("el-button",{attrs:{type:"primary",loading:t.isLoading,size:"small"},on:{click:t.start}},[t._v("开始")]),t._v(" "),n("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.orderByProperty,callback:function(e){t.orderByProperty=e},expression:"orderByProperty"}},[n("el-option",{attrs:{value:"tickDis"}},[t._v("买一/卖一(总价格)")]),t._v(" "),n("el-option",{attrs:{value:"maxCountDis"}},[t._v("买单数(max)/卖单数(max)")]),t._v(" "),n("el-option",{attrs:{value:"lengthDis"}},[t._v("buyCount / sellCount")]),t._v(" "),n("el-option",{attrs:{value:"buy1Money"}},[t._v("买一总价($)")]),t._v(" "),n("el-option",{attrs:{value:"sell1Money"}},[t._v("卖一总价($)")])],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.orderBy}},[t._v("排序")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.stopSearch}},[t._v("中断自动查询")])],1),t._v(" "),n("div",{ref:"tickList",staticStyle:{overflow:"auto"}},[n("div",[n("table",[t._m(0),t._v(" "),n("tbody",t._l(t.list,function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(e.symbol))]),t._v(" "),n("td",[t._v(t._s(e.tickDis))]),t._v(" "),n("td",[t._v(t._s(e.maxCountDis))]),t._v(" "),n("td",[t._v(t._s(e.lengthDis))]),t._v(" "),n("td",[t._v(t._s((e.buy1Money/1e3).toFixed(2)))]),t._v(" "),n("td",[t._v(t._s((e.sell1Money/1e3).toFixed(2)))])])}))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("\n                  Symbols\n                  ")]),t._v(" "),n("th",[t._v("\n                  买一/卖一(价格)\n                  ")]),t._v(" "),n("th",[t._v("\n                  买单数(max)/卖单数(max)\n                  ")]),t._v(" "),n("th",[t._v("\n                  buyCount / sellCount\n                  ")]),t._v(" "),n("th",[t._v("\n                  买一总价($/k)\n                  ")]),t._v(" "),n("th",[t._v("\n                  卖一总价($/k)\n                  ")])])])}]};var De=n("VU/8")(Se,je,!1,function(t){n("ZZ4k")},null,null).exports,Le=n("PJh5"),Fe=n.n(Le),Oe=function(t,e){var n="number"==typeof t?t:Date.parse(t),r=setInterval(function(){Date.now()>n&&(e&&e(),clearInterval(r))},1e3)};function Te(t){return JSON.parse(B()(t)).slice(0,10).sort(function(t,e){return Number(t.price)-Number(e.price)})}var Ve=function(t){var e,n,r=t.bidsList,s=t.asksList,a=t.buyCount,i=t.sellCount,o=(t.preSame,Te(r)),u=Te(s);if(!(o.length<=2)){for(var c=0,l=0,d=[],h=o.length>u.length?u.length:o.length,p=0;p<h/2;p++)d.push({buyPrice:o[p].price,sellPrice:u[h-p-1].price});o.forEach(function(t){c+=Number(t.price)}),u.forEach(function(t){l+=Number(t.price)}),e=c/o.length,n=l/u.length;o.length;var f=Math.round(o.length/2)+a;console.log(o),u.length>5?i:1;var m=Math.round(u.length/2)-i;return console.log(u),{buyPrice:o[f]?o[f].price:o[0].price,sellPrice:u[m]?u[m].price:u[0].price,asksAvg:n,bindsAvg:e,bak:d}}},Pe=n("8k4B"),qe=!1,Ee={name:"Market",components:{},data:function(){return{list:[],symbol:"pai",amount:"",price:"",type:"buy-limit",buttonLoading:!1,openOrders:[],quoteCurrency:"btc",amountPrecision:4,testPrice:10,buyCount:3,sellCount:3}},computed:Bt()({},Object(yt.c)({bidsFirst:function(t){return t.huobi.bidsFirst},bidsList:function(t){return t.huobi.bidsList},aksFirst:function(t){return t.huobi.aksFirst},asksList:function(t){return t.huobi.asksList},responseSymbol:function(t){return t.huobi.responseSymbol}})),created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{trade:function(){var t=this;return this.buttonLoading=!0,console.log(this.type.search("buy")),lt({symbol:this.symbol+this.quoteCurrency,amount:this.amount,price:this.price,type:this.type,action:this.type.indexOf("buy")>-1?"buy":"sell"}).then(function(e){"ok"===e.status&&void 0!==e.data?t.$notify({title:"下单状态",message:"msg: 下单成功",duration:3e3}):t.$notify({title:"下单状态",message:"msg: "+e["err-code"],duration:3e3}),t.getOpenOrders()}).finally(function(){t.buttonLoading=!1})},autoTrade:function(){var t=H()(R.a.mark(function t(){var e,n,r,s,a,i,o,u,c,l,d,h,p,f=this;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.symbol+this.quoteCurrency===this.responseSymbol){t.next=2;break}return t.abrupt("return");case 2:return this.buttonLoading=!0,e=null,t.prev=4,t.next=7,pt();case 7:e=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),this.autoTrade();case 13:if(n="",r="",null!==e){t.next=19;break}throw this.buttonLoading=!1,this.autoTrade(),Error("balanceList没有查到");case 19:return e.list.forEach(function(t){t.currency===f.quoteCurrency&&"trade"===t.type&&(n=Number(t.balance)),t.currency===f.symbol&&"trade"===t.type&&(r=Number(t.balance))}),t.next=22,ot(this.symbol+this.quoteCurrency,"1min",2);case 22:if(null!==(s=t.sent).data){t.next=26;break}return this.buttonLoading=!1,t.abrupt("return");case 26:return a=s.data[0].close,i=n/a,o={buyCount:0,sellCount:0},t.next=31,this.getOpenOrders();case 31:if(this.openOrders.forEach(function(t){"buy-limit"===t.type?o.buyCount++:o.sellCount++}),u=this.testPrice,c=(c="usdt"===this.quoteCurrency?u/a:u/appConfig.prices.btc/a).toFixed(this.amountPrecision),l=Ve({bidsList:this.bidsList,asksList:this.asksList,buyCount:this.buyCount-o.buyCount,sellCount:this.sellCount-o.sellCount}),console.log(l),d={},h=null,Array.isArray(this.openOrders)&&this.openOrders.forEach(function(t,e){void 0===d[t.price]?d[t.price]=1:h=t}),null===h){t.next=51;break}return qe=!0,p=h.type.indexOf("buy")>-1?"buy":"sell",this.buyCount=l.bak.length,this.sellCount=l.bak.length,t.next=47,this.cancelOrder(h.id);case 47:return t.next=49,lt({symbol:this.symbol+this.quoteCurrency,amount:h.amount,price:l.bak[Pe(0,l.bak.length-1)]["buy"===p?"buyPrice":"sellPrice"],type:h.type,action:p});case 49:return t.next=51,this.getOpenOrders();case 51:if(t.prev=51,!(i>c&&o.buyCount<this.buyCount)){t.next=57;break}return t.next=55,lt({symbol:this.symbol+this.quoteCurrency,amount:c,price:l.buyPrice,type:"buy-limit",action:"buy",preSame:qe});case 55:return t.next=57,this.getOpenOrders();case 57:if(!(r>c&&o.sellCount<this.sellCount)){t.next=62;break}return t.next=60,lt({symbol:this.symbol+this.quoteCurrency,amount:c,price:l.sellPrice,type:"sell-limit",action:"sell",preSame:qe});case 60:return t.next=62,this.getOpenOrders();case 62:t.next=67;break;case 64:t.prev=64,t.t1=t.catch(51),this.autoTrade();case 67:this.buttonLoading=!1,setTimeout(function(){f.checkOrder()},2e4);case 69:case"end":return t.stop()}},t,this,[[4,10],[51,64]])}));return function(){return t.apply(this,arguments)}}(),checkOrder:function(){var t=H()(R.a.mark(function t(){var e,n,r,s,a,i,o,u=this;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(t,e){return Math.abs(t-Number(e))/e},t.next=3,this.getOpenOrders();case 3:if(Array.isArray(this.openOrders)&&0!==this.openOrders.length&&this.symbol+this.quoteCurrency===this.responseSymbol){t.next=5;break}return t.abrupt("return");case 5:if(e=Ve({bidsList:this.bidsList,asksList:this.asksList,buyCount:1,sellCount:1}),n=null,r=null,s=null,this.openOrders.sort(function(t,e){return Number(e.price)-Number(t.price)}),a={},i=null,Array.isArray(this.openOrders)&&this.openOrders.forEach(function(t,e){"buy-limit"===t.type?(null===n&&(n=t),s=t):"sell-limit"===t.type&&null===r&&(r=t),void 0===a[t.price]?a[t.price]=1:i=t}),null===i){t.next=19;break}return qe=!0,t.next=17,this.cancelOrder(i.id);case 17:t.next=20;break;case 19:qe=!1;case 20:if(!(null!==n&&o(e.bindsAvg,n.price)>.04)){t.next=23;break}return t.next=23,this.cancelOrder(n.id);case 23:if(!(null!==s&&n!==s&&o(e.bindsAvg,s.price)>.04)){t.next=26;break}return t.next=26,this.cancelOrder(s.id);case 26:if(!(null!==r&&o(e.asksAvg,r.price)>.04)){t.next=29;break}return t.next=29,this.cancelOrder(r.id);case 29:setTimeout(function(){u.autoTrade()},2e4);case 30:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getOpenOrders:function(){var t=H()(R.a.mark(function t(e){var n,r,s,a=this;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.buttonLoading=!0,t.next=3,ct();case 3:return n=t.sent,r=0,s=0,n.some(function(t){return t["base-currency"]===a.symbol&&t["quote-currency"]===a.quoteCurrency&&(r=t["price-precision"],s=t["amount-precision"],a.amountPrecision=s,!0)}),t.abrupt("return",ht({symbol:this.symbol+this.quoteCurrency,side:"buy"}).then(function(t){Array.isArray(t.data)?(t.data.forEach(function(t){t["created-at"]=Fe()(t["created-at"]).format("YYYY/MM/DD h:mm:ss"),t.amount=Number(t.amount).toFixed(s),t.price=Number(t.price).toFixed(r),t["field-amount"]=Number(t["field-amount"]).toFixed(s)}),a.openOrders=t.data):a.openOrders=[]}).finally(function(){a.buttonLoading=!1}));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),cancelOrder:function(t){var e=this;return this.buttonLoading=!0,dt(t).then(function(t){e.getOpenOrders(),e.buttonLoading=!1})},timeoutBuy:function(){var t=H()(R.a.mark(function t(){var e=this;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Oe("2018-07-25T15:00:00",function(){e.trade()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},ze={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"market"},[n("div",[n("table",[n("thead",[n("tr",[n("th",[t._v("\n                       时间\n                       ")]),t._v(" "),n("th",[t._v("\n                       交易对\n                       ")]),t._v(" "),n("th",[t._v("\n                       方向\n                       ")]),t._v(" "),n("th",[t._v("\n                       价格("+t._s(t.quoteCurrency)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       数量 ("+t._s(t.symbol)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       委托总额("+t._s(t.quoteCurrency)+")\n                       ")]),t._v(" "),n("th",[t._v("\n                       已成交\n                       ")]),t._v(" "),n("th",[t._v("\n                       未成交\n                       ")]),t._v(" "),n("th",[t._v("\n                       操作\n                       ")])])]),t._v(" "),n("tbody",t._l(t.openOrders,function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(e["created-at"]))]),t._v(" "),n("td",[t._v(t._s(e.symbol))]),t._v(" "),n("td",[t._v(t._s(e.type))]),t._v(" "),n("td",[t._v(t._s(e.price))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[t._v(t._s(Number(e.amount*e.price).toFixed(t.amountPrecision)))]),t._v(" "),n("td",[t._v(t._s(e["field-amount"]))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[n("el-button",{attrs:{size:"small"},on:{click:function(n){t.cancelOrder(e.id)}}},[t._v("\n                           撤单\n                       ")])],1)])}))])])])},staticRenderFns:[]};var Me=n("VU/8")(Ee,ze,!1,function(t){n("QuQ0")},null,null).exports,Ae={btcusdt:{len:.05,step:1e-4}},Be=function(t){for(var e=t.asksList,n=t.bidsList,r=t.currentPrice,s=t.symbol,a={},i={},o=JSON.parse(B()(e)),u=JSON.parse(B()(n)),c=jt(s),l=Ae[s].len,d=Ae[s].step,h=.001;h<l;h+=d){var p=r*(1-(h=Number(h.toFixed(6)))),f=r*(1+h);a[-h]={count:0,price:p,sumMoneny:0},i[h]={count:0,price:f,sumMoneny:0};t:for(var m=0;m<o.length;m++){var v=o[m][0];if(f<Number(v))break t;i[h].count++,i[h].sumMoneny+=o[m][1]*v*c,o.splice(h,1),m--}t:for(var b=0;b<u.length;b++){var y=u[b][0];if(p>Number(y))break t;a[-h].count++,a[-h].sumMoneny+=u[b][1]*y*c,u.splice(h,1),b--}}return{buy:a,sell:i}},Ne={name:"Table",data:function(){return{}},props:{data:{type:Object,default:function(){return{}}},quoteCurrency:String},mounted:function(){},methods:{}},Re={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",[n("thead",[n("tr",[n("th",[t._v("\n              %\n              ")]),t._v(" "),n("th",[t._v("\n              price("+t._s(t.quoteCurrency)+")\n              ")]),t._v(" "),n("th",[t._v("\n              count\n              ")]),t._v(" "),n("th",[t._v("\n              sum("+t._s(t.quoteCurrency)+")\n              ")])])]),t._v(" "),n("tbody",t._l(t.data,function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s((100*r).toFixed(2)))]),t._v(" "),n("td",[t._v(t._s(e.price.toString().length>10?e.price.toFixed(8):e.price))]),t._v(" "),n("td",[t._v(t._s(e.count))]),t._v(" "),n("td",[t._v(t._s(parseInt(e.sumMoneny)))])])}))])])},staticRenderFns:[]};var Ue={name:"Density",components:{DensityTable:n("VU/8")(Ne,Re,!1,function(t){n("QB6j")},null,null).exports},data:function(){return{buyDensityList:{},sellDensityList:{}}},computed:Bt()({},Object(yt.c)({tick:function(t){return t.huobi.tick},bidsFirst:function(t){return t.huobi.bidsFirst},aksFirst:function(t){return t.huobi.aksFirst},lastKline:function(t){return t.huobi.lastKline},responseSymbol:function(t){return t.huobi.responseSymbol}}),Object(yt.b)(["useWSAble"]),{quoteCurrency:function(){return this.responseSymbol?this.responseSymbol.endsWith("btc")?"btc":this.responseSymbol.endsWith("eth")?"eth":void 0:"usdt"}}),watch:{tick:function(){var t=Be({asksList:this.tick.asks,bidsList:this.tick.bids,currentPrice:this.lastKline.close,symbol:this.responseSymbol});this.buyDensityList=t.buy,this.sellDensityList=t.sell}},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{}},He={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"tickList",staticClass:"tickList"},[e("div",{staticClass:"flex-row container"},[e("div",{staticClass:"flex-1"},[e("DensityTable",{attrs:{data:this.buyDensityList,quoteCurrency:this.quoteCurrency}})],1),this._v(" "),e("div",{staticClass:"flex-1"},[e("DensityTable",{attrs:{data:this.sellDensityList,quoteCurrency:this.quoteCurrency}})],1)])])])},staticRenderFns:[]};var We=n("VU/8")(Ue,He,!1,function(t){n("l9PD")},null,null).exports;M.default.use(Mt.a);var $e=new Mt.a({routes:[{path:"/",name:"Home",component:_e,meta:{keepAlive:!0}},{path:"/charts",name:"Charts",component:_e,meta:{keepAlive:!0}},{path:"/depth",name:"Depth",component:Ce},{path:"/difference",name:"Difference",component:De,meta:{keepAlive:!0}},{path:"/trade",name:"Trade",component:Me,meta:{keepAlive:!0}},{path:"/density",name:"Density",component:We,meta:{keepAlive:!0}}]});n("991W"),n("erWL"),n("758U");M.default.config.productionTip=!1,M.default.use(z.a),M.default.use(q.a),M.default.use(V.a),M.default.use(O.a),M.default.use(L.a),M.default.use(j.a),M.default.use(C.a),M.default.use(x.a),M.default.use(g.a),M.default.use(y.a),M.default.use(v.a),M.default.use(f.a),M.default.use(h.a),M.default.use(l.a),M.default.use(u.a),M.default.use(i.a.directive),M.default.prototype.$loading=i.a.service,M.default.prototype.$notify=s.a,new M.default({el:"#app",router:$e,store:kt,components:{App:zt},template:"<App/>"})},Q6SQ:function(t,e){},QB6j:function(t,e){},QuQ0:function(t,e){},RlG0:function(t,e){},T9RM:function(t,e){},"X+ky":function(t,e){},Yq4J:function(t,e){},ZZ4k:function(t,e){},bwiK:function(t,e){},cDSy:function(t,e){},cHPH:function(t,e){},d7TW:function(t,e){},ecsj:function(t,e){},erWL:function(t,e){},isE6:function(t,e){},jZDA:function(t,e){},l9PD:function(t,e){},n8ix:function(t,e){t.exports=function(t){if(!t)throw Error("param error");var e=[];void 0!==localStorage.symbols&&(e=JSON.parse(localStorage.symbols));var n={"price-precision":4,"amount-precision":4};return e.some(function(e){return!(!t.startsWith(e["base-currency"])||!t.endsWith(e["quote-currency"])||(n["price-precision"]=e["price-precision"],n["amount-precision"]=e["amount-precision"],n["base-currency"]=e["base-currency"],n["quote-currency"]=e["quote-currency"],0))}),n}},qu7u:function(t,e){},uslO:function(t,e,n){var r={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(t){return n(a(t))}function a(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(r)},s.resolve=a,t.exports=s,s.id="uslO"},y4IO:function(t,e){},"z+B7":function(t,e){}},["NHnr"]);